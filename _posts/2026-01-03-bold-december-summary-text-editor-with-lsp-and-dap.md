---
  layout: post
  title: "Bold December Summary (text editor with lsp and dap support) - Bold 12月まとめ"
  date: 2026-01-03T18:50:49.486Z
  categories: [tech, world-news]
  tags: [tech-news, japan]
  source_url: "https://bold-edit.com/devlog/25-12-summary.html"
  source_title: "December Summary - Bold"
  source_id: 473228824
  excerpt: "差分更新で高速化、セマンティックハイライトと柔軟キー割当を備えたLSP/DAP対応エディタの改善報告"
  ---

# Bold December Summary (text editor with lsp and dap support) - Bold 12月まとめ
Boldの進化が見える：LSP/DAP対応テキストエディタの内部改善レポート

## 要約
Boldは高速テキストエディタで、LSP（Language Server Protocol）とDAP（Debug Adapter Protocol）対応を目標に開発中。12月はクラス／ユーティリティの監査、セマンティックトークンの挿入・削除ロジック改良、キーコンフィグのパーサ実装改善に注力し、バグ修正と差分更新（delta）対応を進めた。

## この記事を読むべき理由
エディタやIDEの内部実装（特にセマンティックハイライトの差分更新やキー割当のフォールバック設計）は、エディタ拡張やツール構築に直接役立つ知見です。日本の開発現場で求められる軽量かつ高応答なエディタ設計のヒントが得られます。

## 詳細解説
- 開発状況の概略  
  Boldは「高速」を最優先にした設計で、公開βが5月頃を見込んでいる。12月は作業日数が限られた中で、既存の重要クラス群とユーティリティを精査（audit）し、複数のバグを洗い出して修正した。

- セマンティックトークンと挿入／削除の課題  
  セマンティックトークン（言語意味に基づくハイライト）は、テキスト変更時に効率よく更新するために「差分（delta）更新」を使うが、単純に上書きすると整合性が崩れるケースがあった。挿入・削除時に保持すべき情報（トークンのオフセット、長さ、種類、可能なマージ条件など）を増やす必要があり、そのために数百行の追加ロジックが発生した。要点は「完全上書きではなく、十分なメタデータを保持して増分操作で整合性を保つ」設計。

- キーマップ設定のパーサ改善  
  キーマップ設定ファイルの解析を実装し、1つのショートカットに複数アクションを割り当てられるようにした。実行時には最初のアクションが失敗したら次のアクションを試す（例：デバッガの上下移動が無効なら差分ビューの移動にフォールバック）という振る舞いをサポート。差分ビュー自体は未実装だが、キーマップの柔軟性を高める設計になっている。

- 工数と現状  
  月間の稼働は約2週間弱（休暇や体調不良のため）。UIは先月と大きな変化なし。今後はβ公開に向けて追加機能と安定化が進む見込み。

## 実践ポイント
- セマンティックトークンの増分更新を設計する際は、トークンの「位置・長さ・種類」に加え、変更でどうマージ／分割されるかをモデル化する。完全再計算は遅延の原因になる。  
- 挿入／削除操作は境界条件（トークンの途中での挿入、複数トークン跨ぎの削除）を網羅するユニットテストを用意する。  
- キーマップ設計は「アクション列＋条件評価＋フォールバック」を採用するとモードレス／モード切替混在環境で柔軟に使える。実装時はアクションが失敗する理由（条件未満／無効コンテキスト）を明示しておくとデバッグしやすい。  
- 日本の開発現場向けには、デフォルトでVS Code/Emacs/IDEA系のキー互換モードを用意すると移行コストが下がる。LSP/DAP統合はリモート開発や組み込み開発で特に有用なので、接続やログ取得のUXを優先する。  
- β公開（予定5月）に向けては、大きなファイルやモノレポでのパフォーマンステストを早めに行い、差分更新の恩恵が出るかを計測する。

短期間の改良ながら、差分更新と柔軟なキー割当という基盤部分が手当てされており、今後のβでどれだけ軽快さと使い勝手が出るかが注目点です。
