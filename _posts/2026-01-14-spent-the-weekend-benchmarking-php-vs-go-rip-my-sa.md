---
layout: post
title: "Spent the weekend benchmarking php vs go - 週末にPHPとGoをベンチマークした"
date: 2026-01-14T06:42:13.117Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://drive.google.com/file/d/1bKwvGOcxw9uioeA-v1IRKb5elV8gD8rh/view?usp=sharing"
source_title: "Screenshot 2026-01-14 103516.png - Google ドライブ"
source_id: 427342046
excerpt: "PHPとGoベンチで分かった、実務で本当に使える選択基準と移行コスト"
---

# Spent the weekend benchmarking php vs go - 週末にPHPとGoをベンチマークした
土曜を使って比較！PHPとGoのベンチ結果から「実務で本当に使える選択肢」を見抜く

## 要約
週末に行われた「PHP vs Go」のベンチマークは、単純なスループット差だけでなく「ワークロードの種類・運用形態・開発コスト」で選択が変わることを示す。性能差は有意だが、現場での意味はケースバイケース。

## この記事を読むべき理由
日本ではまだLAMP系レガシーが多く、同時にGo採用の波もある。どちらを選ぶかは「速さ」だけで決まらない。初級者でも理解できるよう、ベンチの正しい読み方と現場で使える判断基準を示す。

## 詳細解説
- ベンチマークの目的を明確にする  
  - マイクロベンチ（関数単位のCPU性能）とマクロベンチ（実際のHTTPリクエスト負荷）は別物。どちらを測るかで結論が変わる。  
  - 測定指標：スループット（req/s）、レイテンシ（平均、p95、p99）、メモリ使用量、CPU使用率、起動時間。

- PHP側の特徴  
  - 実行形態：PHPは基本的にインタプリタだが、php-fpmのような常駐プロセスでリクエストを捌く。OpCacheを有効にすると大幅に高速化。PHP 8以降はJITも導入されたが、効果はワークロード次第。  
  - エコシステム：データベースドライバやフレームワーク（Laravel等）が充実しており、開発速度が速い。  
  - オペレーション：既存のLAMP環境や共有ホスティングとの親和性が高い。

- Go側の特徴  
  - コンパイル言語で単一バイナリ、ネイティブコード実行。ガベージコレクションと軽量ゴルーチンによる高い同時処理性能が強み。  
  - 標準ライブラリで高性能なnet/httpが利用可能、メモリ当たりの接続数が多いワークロードで優位。  
  - デプロイはシンプル（単一ファイル、コンテナ最適化）。ただしエコシステムはPHPほどは大規模でない分ライブラリ選定が必要。

- ベンチ設計の注意点（よくある落とし穴）  
  - 同一条件で比較する：同じハードウェア、同じネットワーク、同じHTTPベンチツール（wrk/hey/ab）を使う。  
  - キャッシュ影響を排除：DBやプロキシのキャッシュを考慮。初回と安定稼働時で差が出る。  
  - Warm-up：PHP-FPMやGoのJIT/コンパイルのウォームアップ時間を考える。  
  - 実務ボトルネックは外部サービス：DBやAPI呼び出しが主な制約であればランタイム差は意味を持たない。

- 実際に期待できる傾向（一般論）  
  - 高並列のピュアCPU/ネットワーク負荷ではGoの方がレイテンシとスループットで優位になりやすい。  
  - 多くの典型的ウェブアプリ（DBアクセス中心）では、PHP（opcache＋php-fpm）でも十分な性能が出ることが多い。  
  - 開発スピードや既存資産、採用可能な人材を考慮すると、移行コストが高い場面も多い。

## 実践ポイント
- まず現状のボトルネックを測る（APM、slow query log、p95/p99）。  
- ベンチ作成のチェックリスト：同一環境、複数反復、冷間/温間測定、p95/p99を必ず報告。  
- PHPでの高速化：OpCache有効化、php-fpmワーカー調整、Nginx keepaliveの最適化。  
- Goでの運用最適化：ビルド最適化（例: -ldflags）、pprofでプロファイル取得、GCチューニングは慎重に。  
- 決定基準：性能が必須でかつ人材確保が可能ならGo、既存資産と短納期重視ならPHP。ハイブリッド運用も現実的（トラフィック集中部をGoに置く等）。

まとめ：ベンチは「数値」を出すだけでなく、どのシナリオでどの値が意味を持つかを理解することが肝心。週末のベンチ結果は興味深い出発点だが、実務ではワークロードに合わせた評価と運用面の判断が最優先。

---
