---
layout: post
title: "Learn C++ Itanium Symbol Mangling - C++ Itanium シンボル名マングリングを学ぶ"
date: 2026-01-10T17:46:26.153Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://noratrieb.github.io/womangling/"
source_title: "Womangling"
source_id: 1044683085
excerpt: "Itanium式C++マングリングを学び、リンクエラー原因やABI不整合を素早く特定する実践ガイド"
---

# Learn C++ Itanium Symbol Mangling - C++ Itanium シンボル名マングリングを学ぶ
負けないデバッグ力を手に入れる：リンクエラーの正体を読み解くマングリング入門

## 要約
C++の「マングリング」は関数や型情報をオブジェクトファイルのシンボル名にエンコードする仕組み。Itaniumスタイル（GCC/Clangが採用）は広く使われており、これを理解するとリンクエラー解析やバイナリレベルのトラブルシュートが格段に楽になります。

## この記事を読むべき理由
日本でもLinux、組込み、ゲーム、モバイル（NDK）、高周波取引などの領域でC++バイナリを扱う機会が多く、マングリング知識は実務で直接役立ちます。未経験でも原理と実践ツールが分かれば、ビルド/リンク問題やABI互換の判断ができるようになります。

## 詳細解説
- マングリングの目的
  - C++は関数のオーバーロードや名前空間、テンプレートなどを持つため、リンク時に一意なシンボル名が必要。マングリングは「関数名＋引数型＋名前空間/クラス情報」を文字列に変換する規則です。
- Itanium C++ ABI（Itanium-style）
  - GCC/Clangが採用する標準的な形式。安定化しているため、学んでおくと長く使える知識です。
- 基本ルール（概要）
  - 先頭に識別子（例: _Z）を付け、名前や型は長さ付きエンコードやプレフィックスで表現する。
  - 例: int foo(int) → マングル例: _Z3fooi （_Z + 3(長さ)foo + i(int)）
- テンプレートや名前空間
  - テンプレートは型引数ごとに複雑な表現が入り、多段のネームスペース／クラス名は階層を長さ付きで連結します。
- なぜ理解すると便利か
  - nmやobjdumpで表示されるシンボルが読めると、未解決シンボルの原因追及・ライブラリ間のABI不整合の特定・手動でのデマングリング（逆解析）が可能になります。
- 参考となる学習リソース
  - Womangling（元記事）は、レッスンとインタラクティブ問題で段階的に学べる良質な入門サイトです。

簡単な例
```cpp
// test.cpp
int foo(int) { return 0; }
```
コンパイルしてシンボル確認（端末で）
```bash
g++ -c test.cpp
nm test.o
# 例: 00000000 T _Z3fooi
c++filt _Z3fooi
# -> int foo(int)
```

## 実践ポイント
- まずは手を動かす：短い関数やテンプレートを書いてコンパイルし、nm / objdump でマングル名を確認する。
- デマングルツールを覚える：
  - コマンドライン: c++filt, abi::__cxa_demangle
  - ライブラリ/言語バインディングでデマングル機能を利用可能
- リンカエラー対処法：
  - 未解決シンボルはマングル名で検索して、宣言・実装の型や名前空間が一致しているか確認する。
- 日本の現場での活用例：
  - Android NDKのネイティブ開発、組込みファームウェア、ネイティブライブラリを扱うサーバー開発でのABIトラブルシュートに直結します。
- 次の一歩：
  - Womanglingのレッスンを順にこなす（Interactiveで感覚的に学べる）、公式のItanium C++ ABIドキュメントを参照して体系的に理解する。

元記事「Learn C++ Itanium Symbol Mangling」は、初心者向けのレッスンとクイズが充実しているので、実践しながら学ぶのに最適です。ぜひ手元で小さな例を試して、マングリングを「読む力」を身につけてください。
