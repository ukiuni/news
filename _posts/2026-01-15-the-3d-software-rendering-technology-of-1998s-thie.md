---
layout: post
title: "The 3D Software Rendering Technology of 1998's Thief: The Dark Project - 1998年作『Thief: The Dark Project』の3Dソフトウェアレンダリング技術"
date: 2026-01-15T14:36:41.859Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://nothings.org/gamedev/thief_rendering.html"
source_title: "The 3D Software Rendering Technology of 1998's Thief: The Dark Project"
source_id: 46630798
excerpt: "1998年『Thief』のポータル＆オクタゴン手法でGPU不要の室内高速レンダリングを実現する解説"
---

# The 3D Software Rendering Technology of 1998's Thief: The Dark Project - 1998年作『Thief: The Dark Project』の3Dソフトウェアレンダリング技術
1998年の名作が教える「ハード無しで実現した室内レンダリング」の秘密 — レトロ技術が今でも役立つ理由

## 要約
『Thief』は当時急速に普及し始めたGPUアクセラレーションを使わず、ソフトウェアのみで室内向け高速レンダリングを実現した。キーは「ポータル＆セル」ベースの視認性判定と、描画順・クリップで過描画（オーバードロー）を抑える工夫にある。

## この記事を読むべき理由
- レトロゲーム技術から学べる「軽量で決定論的な」室内レンダリング手法は、低スペック環境や組み込み・モバイル、学習用途で今も有効。  
- 日本のインディー／ゲーム開発者や描画に興味があるエンジニアにとって、実装上の実践的ノウハウが詰まっている。

## 詳細解説
1. ポータル＆セルによる視界管理  
   - レベルを「セル（凸ポリヘドロン）」に分割し、セル間の境界を「ポータル」として扱う。視点から幅優先でポータルをたどり、見えるセルだけを描画対象にする。  
   - Quakeが事前にPVS（潜在可視集合）を作るのに対し、Thiefはランタイムでポータルをたどって可視領域を決定する点が特徴。これにより動的な視界制御が可能になる。

2. バウンディング“オクタゴン”で効率的なクリッピング  
   - 可視領域を単純な矩形ではなく、軸回転した矩形を組み合わせた「バウンディング・オクタゴン」で表現し、ポータル経由で見える領域を2Dでクリップする。  
   - これにより過描画が大幅に減り、ポリゴンを部分的に切って描くため描画負荷を下げられる。実際にはポリゴンが8辺になることが頻繁にあるが、処理は簡潔。

3. オブジェクトのセル追跡とカリング  
   - オブジェクトは移動にあわせてどのセルにいるかをインクリメンタルに追跡。可視セルに含まれないオブジェクトは描かない。  
   - さらにオブジェクトごとに2Dバウンディング（オクタゴン）を評価し、セルの可視領域と重なっているかをチェックしてより細かくカリングする。

4. ゼットバッファ不使用と複雑なソータ  
   - ThiefはZバッファを使わず、ワールドポリゴンを後ろ→前へ描く「ペインターズ方式」を採用。オブジェクトとワールドの描画を適切に挟み込むために、非常に工夫されたソートアルゴリズムが必要だった。  
   - BSPでセルをソートするようになってからはワールド自体は順序が保証されるが、オブジェクトが複数セルに跨る場合の描画タイミング調整や、ポータル経路ごとに可視領域を統合するロジックが複雑になった。

5. テクスチャマッピングとその他の工夫  
   - 頂点ごとのUVではなく、テクスチャ座標を3D基底ベクトルとして扱い、スパン単位で計算する手法を採用。これにより頂点数に依存しない効率的なマッピングが可能になった。  
   - スカイボックスや影、光源は描画フロー内で特殊扱いしていた（概念的処理の工夫で描画負荷を抑制）。

## 実践ポイント
- 小規模エンジンや屋内主体のゲームなら「ポータル＋セル」の可視化は強力：まずは手作りで室内をセル分割してランタイムでポータルをたどる実験をしてみる。  
- 可視領域は厳密にやろうとすると重くなるので、矩形→オクタゴンのように段階的に改善して効果を測る。  
- オブジェクトのセル所属をインクリメンタルに更新すると、動的シーンでも高速にカリングできる。  
- Zバッファが使えない（あるいは使いたくない）場合の描画順問題は「セル単位の描画順付け＋オブジェクトの前後セル判定＋バウンディングによる可視判定」で対処できる。  
- 学習用途なら、まずは小さなデモ（単一の部屋＋ドア＝ポータル）を作ってから拡張すると理解が早い。

参考として、Sean Barrettによる元調査は技術的な細部が豊富なので、興味があれば原著を読むとより深い実装知見が得られます。
