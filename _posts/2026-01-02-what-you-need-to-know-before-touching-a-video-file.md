---
  layout: post
  title: "What You Need to Know Before Touching a Video File - ビデオファイルに触る前に知っておくべきこと"
  date: 2026-01-02T15:01:56.556Z
  categories: [tech, world-news]
  tags: [tech-news, japan]
  source_url: "https://gist.github.com/arch1t3cht/b5b9552633567fa7658deee5aec60453/"
  source_title: "What you NEED to know before touching a video file · GitHub"
  source_id: 46404321
  excerpt: "拡張子だけで変換すると画質劣化必至—リマックスで高速無損失に変換する方法を解説"
  image: "https://github.githubassets.com/assets/gist-og-image-54fd7dc0713e.png"
---

# What You Need to Know Before Touching a Video File - ビデオファイルに触る前に知っておくべきこと
ビデオ変換で損しないための黄金ルール — 「mp4に変換する前」に絶対読んでおくべき短い教科書

## 要約
コンテナ（.mkv/.mp4）とコーデック（H.264/H.265など）は別物。不要な「再エンコード（reencode）」を避け、できる限り「リマックス（remux）」で済ませるのが時間・品質・容量を守る最短ルートです。

## この記事を読むべき理由
多くの初学者は拡張子だけ見て変換ツールを使い、無駄に時間をかけて画質を劣化させます。スマホのHEVC、配信向けのエンコード要件、編集ソフトの対応差など、日本の現場でも頻出する問題を避けられます。

## 詳細解説
- コンテナとコーデックの違い  
  - コンテナ（.mkv/.mp4/.mov 等）は映像・音声・字幕トラックやメタデータを格納する「箱」。  
  - コーデック（H.264/AVC、H.265/HEVC、VP9、AV1 等）は実際に映像を圧縮・復号する方式。コンテナを変えても中身のコーデックが同じなら再エンコード不要（＝リマックス可能）。

- リマックス vs 再エンコード  
  - Remux（リマックス）：トラックを「そのままコピー」して別の容器に詰め直す。処理は高速で無損失。  
  - Reencode（再エンコード）：デコード→再圧縮するので時間・計算コストがかかり、画質低下（ロス）が発生する可能性あり。手軽なGUIツールやWeb変換は意図せず再エンコードすることが多い。

- エンコーダーと品質の主因  
  - 良質なソフトエンコーダー（x264/x265）が最も効率的で画質効率に優れる。  
  - ハードウェアエンコーダー（NVENCなど）は速度重視で、マスター用の高品質化には向かない。  
  - CRF（Constant Rate Factor）はx264/x265での主要な画質制御パラメータ。CRFが低いほど高画質・ファイル大。目安：x264 CRF 18–23、x265 CRF 20–28（用途に応じて調整）。

- 「画質」とは何か  
  - 画質は絶対値ではなく「ある参照（オリジナル）にどれだけ近いか」で評価される。解像度・フレームレート・ビット深度・色域・ビットレート・前処理（シャープ化、ノイズ除去等）など全工程で変化する。PSNR/SSIM/VMAF 等の客観指標もあるが万能ではない。

- 実務で注意すべき細部  
  - フレームレート変換やドロップ/追加は動きに不具合を生む。編集ソフトとのタイムベース整合に注意。  
  - HDRや色深度（10bitなど）はメタデータを正しく保たないと色が壊れる。  
  - 字幕や複数音声トラックはコンテナ間で扱いが異なる（例えば mkv は字幕運用が柔軟）。  
  - オリジナルは必ず保存。エンコードは元からの劣化を取り戻せない。

## 日本市場との関連
- スマホ（iPhone/Android）のHEVC録画普及により、編集や再生互換性の問題が増加。編集現場で「映像は開けるが編集不能」になる事例が多い。  
- 日本の放送・配信は仕様が厳しく（解像度、色域、ビットレート、ラウドネス等）、納品前に正しいコーデック/コンテナで出す必要がある。  
- アニメやファンコミュニティではMKVが標準的だが、商用ツールやある環境ではMP4が求められるため、リマックスで済ませられるかを判断できるスキルが重要。

## 実践ポイント
- ファイル情報はまず確認：MediaInfo や ffprobe でコーデック・色深度・フレームレートを確認する。  
  - 例（ffprobe）:
  ```bash
  ffprobe -v quiet -show_format -show_streams input.mkv
  ```
- リマックスを試す（再圧縮しない）：
  ```bash
  # 映像と音声をそのまま別コンテナに移す（高速・無損失）
  ffmpeg -i input.mkv -c copy output.mp4
  ```
- 再エンコードが必要なときは高品質エンコーダーとCRF制御を使う：
  ```bash
  ffmpeg -i input.mkv -c:v libx264 -crf 20 -preset slow -c:a copy output.mp4
  ```
- マスターはソフトエンコード（x264/x265）で作る。NVENC等は配信向けや素早いトランスコード向けに限定。  
- HDR・色深度・字幕・チャプター等のメタデータは意識して保持する。必要なら mkvtoolnix や MP4Box を使う。  
- 小さなクリップでテストしてから本番処理を回す。常に原本を残す。

これだけ押さえれば、無駄な時間と画質の損失を大幅に減らせます。まずは MediaInfo/ffprobe で中身を確認し、「リマックスで済むか」を最初に判断する習慣をつけましょう。
