---
layout: post
title: "Applications where agents are first-class citizens - エージェントを第一市民とするアプリケーション"
date: 2026-02-02T12:49:30.728Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://every.to/guides/agent-native"
source_title: "Agent-native Architectures: How to Build Apps After Code Ends"
source_id: 46855003
excerpt: "原子ツールとプロンプトで機能を即追加できるエージェントネイティブ設計指南"
image: "https://every.to/assets/og/agent-native-architectures-13a1b8709ed39ecd8f51590de3116637db055c923f2f97ba0007d5d85251f7da.png"
---

# Applications where agents are first-class citizens - エージェントを第一市民とするアプリケーション
魅力タイトル: 「コードを書かずに機能を増やす時代へ──"エージェントネイティブ"でアプリを設計する新しい法則」

## 要約
エージェント（ループでツールを組み合わせ、目的を達成する自律的AI）を中心に据えた設計法――「エージェントネイティブ」――の原則と実装パターンを整理したガイド。UIでできることは全てエージェントでも達成できるようにし、原子的なツールを揃えてプロンプトで機能を作る発想が核。

## この記事を読むべき理由
- 日本のプロダクト開発でも、機能の増減が早いSaaSやモバイルアプリにおいて、コードを頻繁に書き換えずに新機能を提供・検証できる手法が有効。  
- エンジニア／プロダクト担当が「どこから手を付けるべきか」を具体的に理解できる。

## 詳細解説
- 基本原則（要点）
  - パリティ（Parity）: ユーザーがUIでできることは、エージェントがツールで再現できなければならない。差があると期待外れを生む。
  - 粒度（Granularity）: ツールは原子操作（read_file, write_file, bash など）にし、判断はエージェント（プロンプト）側に持たせる。判断をツールに埋めると柔軟性が失われる。
  - 合成性（Composability）: 原子ツールが揃えば、新機能はプロンプトを書くだけで生まれる（例：「今週変更のあったファイルを要約して優先事項を提案して」）。
  - 自発的能力（Emergent capability）: 想定していない要求でも、エージェントがツールを組み合わせて応えることで、利用者ニーズが見えてくる。
  - 時間経過での改善: 文脈ファイルやプロンプト調整でコードを変えずに振る舞いを改善できる。

- 実装パターン
  - プリミティブから始める：まずはファイル操作やbashなどで「動くか」を検証。その上でよく使われる操作だけドメインツールに昇格させる。
  - ドメインツールのルール：概念的に一つの操作を表す（例 create_note）。ただし、汎用プリミティブは残しておき、エッジケースではそこにフォールバックできるようにする。
  - ファイルを第一インターフェースに：エージェントはファイル操作に強く、ファイルは可視性・ポータビリティが高い。ユーザーが直接編集・検証できる点も利点。
  - データ設計：大テキストやエージェント生成物はファイル、関係性や高頻度クエリはDB。小規模・透明性重視ならファイルを優先。
  - コンフリクトと同期：iCloud等の同期や同時編集を考慮し、ドラフト領域、追記ログ、排他制御、衝突解決方針（last-write-wins の注意点）を設計する。
  - 実行管理：エージェントが「完了」を明示できる仕組み（成功・失敗とは別に continue/complete 指示）やチェックポイントを用意する。
  - セーフガード：エージェント自身の自己改変や重要操作は承認ゲートやロールバック経路を必須にする。

- 構造化の具体例（入門向け）
  - エンティティ単位ディレクトリ例: Research/books/{bookId}/ に full_text.txt、notes.md、agent_log.md を置く。  
  - context.md: セッション開始時にエージェントが読む「現在の状態とガイドライン」を人間可読で保持する。

## 実践ポイント
- まずは小さく始める：read_file/write_file/bash レベルの原子ツールでプロトタイプを作る。
- パリティチェック表を作る：UIの主要操作ごとに「エージェントがどう達成するか」をマッピングする。
- ドメインツールは慎重に追加：よく使う繰返し処理を効率化するが、必ずプリミティブを残す。
- ファイル運用ルールを決める：エンティティ構成、命名規則、ログとチェックポイントの場所を標準化する。
- 同期と衝突戦略を明示する：特にモバイル（iCloud等）対応なら、衝突検知／解決の設計を最初に入れる。
- 安全策を組み込む：自己改変や重要な外部操作は承認フローや復元手段を持つ。

以上を踏まえると、エージェントネイティブ設計は「早く学習し、ユーザー要求から自然に進化するプロダクト」を作る有力な方法です。まずはプリミティブとパリティを押さえ、小さなユースケースで検証してみてください。
