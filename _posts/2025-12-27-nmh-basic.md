---
layout: post
title: NMH BASIC
date: 2025-12-27 18:40:13.823000+00:00
categories:
- tech
- world-news
tags:
- tech-news
- japan
source_url: https://t3x.org/nmhbasic/index.html
source_title: T3X.ORG nmhbasic/index
source_id: 46401938
excerpt: わずか5KBのBASICに詰まった省メモリ設計とスタックレス技法の実践的ノウハウを覗く
---
# 5KBの魔法 — レトロに学ぶ「NMH BASIC」が示す小さなインタプリタの大きな示唆

## 要約
1990年代初頭に作者が手作りした極小BASICインタプリタ「NMH BASIC」は、わずか数KBで実用的な機能を持ち、スタックレスなフラッドフィルやLFSRによる擬似乱数など、メモリ制約下での工夫が満載だ。

## この記事を読むべき理由
小メモリ環境や組み込み系の最適化、レトロコンピューティングに興味がある日本のエンジニアは、NMH BASICから「実装トリック」「言語設計の割り切り」「アルゴリズムの省メモリ化」を学べる。教育用やプロトタイプ作成にも有効なヒントが詰まっている。

## 詳細解説
- 背景と作られた経緯  
  作者は1994年ごろにBASYL-IIで試作し、機能ごとに8086アセンブリに移植して完成させた。生成物は約4.7KBと非常に小さく、内部で効率的なトークン表現を使うことで、12KB程度のRAMでも実用的に動く。後にT3X（Tcode）へ翻訳され、UNIX上でも扱えるようにされた。

- 主な技術的特徴  
  - メモリ最適化されたインタプリタ設計：トークン表現の効率化と小さな実行ファイルサイズ。  
  - 変数／配列の「省略的」命名則：変数名は1文字か1文字＋数字のみ。A, A0, A(0)が同一のエントリを参照するなど、文字空間を連続的に配列スロットに再利用するトリッキーな実装で、DIMは意味合いの注釈に近い。  
  - RNGの自前実装：言語自体に乱数器が無いため、15ビットのLFSR（線形帰還シフトレジスタ）をBASICで実装している。  
  - スタックレスなフラッドフィル：テキストモードで動くマインスイーパ風のデモは、メモリを動的確保しないスタックを使わないフラッドフィルを採用。状態を盤面そのものに埋め込み、外部スタックやヒープを不要にしている（論文「A Stackless Floodfill Automaton」あり）。  
  - マルチターゲット配布：BASYL-II版、8086アセンブリ版、T3X版、CP/M向けバイナリなどが同梱。CP/M版は約32KBのTPAを必要とする。

- なぜ興味深いか  
  現代では無意味に見える極端なリソース制約下の工夫が、設計の「削ぎ落とし」と「代替アルゴリズム」の好例になる。特に組み込み、教育、プロトタイピングで「最小限で動かす」思想は今でも有益。

## 実践ポイント
- レトロ環境で実験する  
  同梱されたCOM/Tcode実行ファイルやソースを動かして、極小インタプリタの挙動を観察する。T3X/0やTASM/MASMで再ビルドする手順を試すと、ツールチェインの理解が深まる。

- スタックレスアルゴリズムを学ぶ  
  フラッドフィルのデモと付随論文を読み、状態を入力データに埋め込むテクニックを学ぶと、スタックやヒープが使えない環境でのアルゴリズム設計に役立つ。

- 教育に応用する  
  学生や新人への教材として、なぜ設計上のトレードオフが発生するかを示すのに最適。例えば変数命名規則やLFSRの実装を通じて、言語設計とハードウェア制約の関係を体験させられる。

- モダンな応用例を考える  
  - 省メモリなスクリプトランタイムのプロトタイプ作成  
  - 組み込み機器向けの簡易スクリプトレイヤー実装  
  - レトロゲーム制作やヴィジュアルノベルのテキストエンジンの軽量化

