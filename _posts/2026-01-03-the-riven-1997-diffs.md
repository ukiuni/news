---
  layout: post
  title: "The Riven (1997) Diffs - Riven（1997）の差分解析"
  date: 2026-01-03T23:16:55.691Z
  categories: [tech, world-news]
  tags: [tech-news, japan]
  source_url: "https://glthr.com/the-riven-diffs-1"
  source_title: "The Riven (1997) Diffs"
  source_id: 46482642
  excerpt: "Rivenのレンダー差分で90年代開発の痕跡や未完成箇所が鮮やかに露出"
---

# The Riven (1997) Diffs - Riven（1997）の差分解析
Rivenの「隠された時間」を視覚化する――レンダー差分ツールが暴く90年代ゲーム開発の痕跡

## 要約
Rivenの内部レンダーをカード単位で比較する「diff」解析により、開発途中の異なる時点が同じ視点内で再現され、ジオメトリ変更、スプライス、パッチの誤用など多数のレンダリング異常（anomaly）が可視化された。

## この記事を読むべき理由
Rivenはゲーム考古学やレンダリング管理の“教科書的”事例。現代のゲーム開発／ローカライズ／保存に関わるエンジニアやツール開発者にとって、古いアセット構造と差分解析から得られる知見は、最適化・デバッグ・アーカイブ戦略に直結する示唆を与える。

## 詳細解説
- エンジンの違い（Myst vs Riven）
  - MystはHyperCardの一視点＝一カード（静的イメージ）モデルを採用。  
  - RivenはMohawkエンジンを使い、同一カード上で複数レンダー（ワールドステート別）を保持し、必要なレンダーを切り替えて表示する。つまり「同じカメラ位置で時間差が共存」する設計。

- Riven Explorerと「diff」手法
  - 専用ツールでカード内の各レンダーを組合せ比較（A vs B, A vs C, B vs C…）。レンダー数 n に対して差分数は三角数列に従う：$$T_n=\frac{n(n-1)}{2}$$（例：3枚→3差分、5枚→10差分）。
  - 可視化モード
    - ピクセル差分レンダリング：白黒合成に不一致点を赤で強調。ディザやカラーテーブル差での誤検知はあるが、微細変更を拾える。
    - アニメーション比較：画像を高速で切替表示し、動きとして差分を認識させる手法。

- 発見された主要な異常（抜粋）
  - ドーム類（spinning dome）：開閉でヒンジのオクルージョンやポリゴン密度が変化するカードが複数存在。ドーム基部が前後に動く例も。
  - スプライス（splice）：レンダー内部で別画像の領域がコピペされた痕跡（四角い継ぎ目が差分で浮かび上がる）。
  - パッチ（patch）誤用：背景にオーバーレイする短いビデオ／画像で世界状態を表現する手法。欠落・二重表現によりゲーム内で瞬間的なズレが生じる例（ドックの伸縮と牢の開閉のタイミング不整合）。
  - 間違ったレンダー割当：特定のライト状態でカードに別視点のレンダーが割当てられており、同位置で“形が変わる”ように見える。
  - トーテムのズレ：個別に上げ下げできるトーテムが、ズーム時に全て同じ状態で描画されるなど、部分的なパッチ/ズーム用レンダーの不整合。

- 用語整理（簡潔）
  - CARD：プレイヤーが立てる場所。複数レンダーを持つ場合あり。
  - WORLDSTATE：レバーやエレベータなどの全体状態。
  - PATCH：矩形の上書き画像／動画。リアルタイム合成で差分枚数を減らす手段。
  - SPLICE：最終レンダー画像内に別画像を切り貼りした編集。
  - FMV：画面内のモーションはほとんどFMV。

- 調査基盤
  - 資産抽出ツール（例：Riveal）を用いてレンダー資産を取り出し、カード番号やバージョン差に留意（この記事は英語10周年DVD 1.2版を基準）。

## 実践ポイント
- レンダー差分ツールはレガシー資産の「時間的層」を露呈する：開発履歴・未完成箇所・最適化トレードオフを可視化できる。
- モダンゲームでも有効な教訓
  - リソース管理：すべてを都度再レンダーするのではなく、patch的なオーバーレイの利点と落とし穴を理解する。
  - QA手法：ピクセル差分＋フリッカ比較で「意図しない視覚差分」を効率的に検出可能。特にローカライズでビジュアル分岐が起きやすい箇所に有効。
  - アーカイブと互換性：カード／レンダー単位での保存は、将来の解析や移植に強い。メタデータ（ワールドステート、パッチ位置、FMV参照）を保存しておくこと。
- 実装アクション（今すぐできること）
  - アセット抽出とバージョン別レンダー収集を行い、同一カメラ位置での比較を自動化するスクリプトを作る。
  - 差分検出はピクセル閾値＋フレーム切替（アニメ化）で両面運用する。
  - ローカライズ工程で「異なるワールドステートが同一カードでどう見えるか」をテストケースに組み込む。

（ネタバレ注意：この記事はゲーム内状態やエンディングに関する情報を含みます。）
