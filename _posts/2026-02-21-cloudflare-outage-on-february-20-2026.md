---
layout: post
title: "Cloudflare outage on February 20, 2026 - 2026年2月20日のCloudflare障害"
date: 2026-02-21T19:38:24.966Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://blog.cloudflare.com/cloudflare-outage-february-20-2026/"
source_title: "Cloudflare outage on February 20, 2026"
source_id: 47103649
excerpt: "BYOIP自動化ミスでCloudflareが約1100プレフィックスを撤回、最大6時間停止の内幕"
image: "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/uFzR7cRW6VzZMP5YSUNZV/4120d828e3f57c095b51b2be805d2a02/BLOG-3193_OG.png"
---

# Cloudflare outage on February 20, 2026 - 2026年2月20日のCloudflare障害
クリックせずにはいられないタイトル: BYOIPで何が起きたのか？Cloudflareが“自社IPを消した”致命的な自動化ミスの中身

## 要約
Cloudflareは2026-02-20にBYOIP（Bring Your Own IP）関連の自動処理バグで約1,100プレフィックスをBGPから撤回し、一部顧客のサービスが最大6時間強停止した。原因はAddressing APIを操作するクリーンアップタスクのクエリ誤りと、それを防げなかったデプロイ/検証プロセスの不備。

## この記事を読むべき理由
日本のクラウド利用企業やネットワーク運用者にとって、BGP/自前IP運用とAPI自動化の落とし穴は現実的なリスク。今回の教訓は、自社サービスの可用性設計や運用ガバナンスに直結します。

## 詳細解説
- 何が起きたか：定期実行タスクがAddressing APIに対して`?pending_delete`（値なし）でGETを投げたところ、サーバ側実装が空文字を「フラグあり」と解釈。結果としてBYOIPの全関連プレフィックスと依存オブジェクト（サービスバインディング等）を削除対象と認識し、自動的にwithdrawを進めた。
- 影響範囲：全広告中6,500プレフィックスのうち約1,100が一時撤回。Cloudflare管理の一部（例：one.one.one.one）も影響を受け、CDN、Spectrum、Magic Transit、Dedicated Egress等で接続タイムアウトや通信不能が発生。復旧は段階的で、ダッシュボードで自己回復できた顧客もいれば、サービスバインディングの消失によりCloudflare側の手動復旧が必要だった顧客もあった。
- 検出と復旧：問題検知後に該当変更をロールバックしたが、完全復旧まで約6時間。途中、一部顧客はダッシュボードで再広告できたが、約300プレフィックスはエッジ設定が消えたため夜間に手動復旧が必要だった。
- なぜ防げなかったか：ステージングのモックデータやテストでタスクランナーが自律的にユーザーデータに対し変更を行うケースを網羅しておらず、APIスキーマの曖昧さ（真偽フラグが文字列扱い）や運用と設定状態の密結合が致命傷になった。
- 改善策（Cloudflareの施策）：APIスキーマの厳格化、運用状態と設定の分離、構成スナップショットとヘルス指標による段階的ロールアウト（Code Orange: Fail Small）、手動操作の排除と安全な自動化ワークフロー導入。

## 実践ポイント
- BYOIPや自前IPを使っているなら：自身のプレフィックスがダッシュボードで再広告できるか事前に手順を確認・練習しておく。BGPアナウンスの監視を強化。
- API設計：フラグは型を明確に（boolean等）。クライアント／サーバ双方で厳密なバリデーションを入れる。
- デプロイと検証：タスクランナー等の自律処理はステージングで「自発的に改変する」パターンまで再現する。テストカバレッジを運用系シナリオまで拡張。
- 可搬なロールバック：設定のスナップショット化と健康指標による段階的リリースを採用する。設定と運用状態は分離する。
- 監視とレスポンス：BGPレベルの外形監視（ルート撤回やパスハンティング検出）と、顧客向け自己復旧手順を整備する。

短く言えば、「自動化は便利だが副作用は大きい」。型と境界を厳しくし、運用の“異常系”を必ずテストに組み込んでください。
