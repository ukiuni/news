---
layout: post
title: "Lindenmayer Systems - リンデンマイヤー系"
date: 2026-02-20T13:41:15.198Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://justinpombrio.net/2026/02/16/l-systems.html"
source_title: "Lindenmayer Systems"
source_id: 686205460
excerpt: "短い規則で亀グラフィクスと色彩を駆使し壮麗なフラクタルを生成"
---

# Lindenmayer Systems - リンデンマイヤー系
わずかなルールで描く無限の模様：L-システムで作る美しいフラクタル

## 要約
L-システムは短い文字列と置換規則を繰り返すだけで、カオスに見えるが厳密なフラクタル曲線や空間充填曲線を生成する手法。亀（turtle）グラフィクスと組み合わせることで視覚的に魅力的な画像を簡単に得られる。

## この記事を読むべき理由
日本のビジュアル表現やデータ可視化、教育コンテンツ制作で「少ないルールから複雑な形を作る」手法は強力。L-システムはアルゴリズム教育、生成アート、さらには地図・経路可視化のアイデア出しにも使えます。

## 詳細解説
- 基本概念  
  - 開始文字列（start）を定め、各文字に対する置換規則（productions）を何回か適用して長い命令列を得る。  
  - その命令列を「亀（turtle）」に解釈させ、線分（f）や回転（+／-）で描画する。  
  - 回転角は「ターン単位」で指定することが多く、例えば六角形は角度 $1/6$、ドラゴン曲線は $1/4$。

- 亀コマンド（例）  
  - f: 前進1単位（描画）  
  - -: 左へ回転（指定角）  
  - +: 右へ回転（指定角）  
  - 文字（例：R, L, X）は展開用のシンボル。描画時に無視するか `f` に置き換える（implicit_f）ことがある。

- ドラゴン曲線（代表例）  
  - start: "R"  
  - rules: R → Rf+L, L → Rf-L  
  - angle: $1/4$  
  - 繰り返すごとに命令列が指数的に増え、約22回程度で回転がピクセル未満になり見た目が安定する（以降は回転での差分のみ）。

- 変種と実装上の工夫  
  - Hilbert 曲線や Koch 雪片など、別の置換規則で空間充填や自己相似図形を生成できる。  
  - 色付けは重要な表現要素：CET の知覚均一カラーマップ、OK-LAB 基底での合成、3D Hilbert を色空間に走査して貼り付ける手法などが紹介されている。特に 3D-Hilbert を色空間に適用すると非常に豊かなテクスチャが得られる。  
  - 実装例は Rust で公開されており、`implicit_f` フラグで未定義シンボルの扱いを切り替えられる。例えばドラゴン曲線の定義は次のように表現できる：

```rust
LindenmayerSystem {
    start: "R",
    rules: &[('R', "Rf+L"), ('L', "Rf-L")],
    angle: 0.25,
    implicit_f: false,
}
```

- 計算量と可視化の注意点  
  - イテレーションを増やすと命令数は指数増。ピクセル解像度やレンダリング性能に合わせて反復回数を調整すること。ベクター出力やスケーリングで高解像度化すると良い。

## 実践ポイント
- まずは既存リポジトリを動かす：https://github.com/justinpombrio/lindenmayer  
- 小さな start と 1〜6 回の反復で挙動を確認し、角度を $1/6,\,1/4,\,1/3$ など変えてみる。  
- `implicit_f` を切り替えて、シンボルを無視するか描画に変換する影響を確認する。  
- カラーマップは OK-LAB ベースの合成や 3D-Hilbert を試し、見た目の変化を比較する。  
- 空間充填曲線（Hilbert, Moore, Sierpinski など）を素材に、UI/可視化コンポーネントの背景や生成アートの素材を作る。

短時間で試せる実験性と、深掘りすれば数学的にも美しい世界が広がるのが L-システムの魅力です。
