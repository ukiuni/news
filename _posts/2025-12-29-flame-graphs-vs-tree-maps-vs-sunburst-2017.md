---
layout: post
title: Flame Graphs vs. Tree Maps vs. Sunburst (2017) - フレームグラフ vs ツリーマップ vs サンバースト (2017)
date: 2025-12-29T20:28:03.891Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://www.brendangregg.com/blog/2017-02-06/flamegraphs-vs-treemaps-vs-sunburst.html"
source_title: "Flame Graphs vs Tree Maps vs Sunburst"
source_id: 46401052
excerpt: "会議や運用で使えるFlame/TreeMap/Sunburstの最適な使い分け法"
---

# Flame Graphs vs. Tree Maps vs. Sunburst (2017) - フレームグラフ vs ツリーマップ vs サンバースト (2017)

## 要約
ファイルサイズやプロファイルの階層データを可視化する代表的手法（Flame Graph／Tree Map／Sunburst）を比較し、どの場面でどれを選ぶべきかを実践的にまとめる。

## この記事を読むべき理由
可視化は「きれいに見える」だけで誤解を生むことが多い。日本の現場（資料プレゼン、運用ダッシュボード、モノレポ解析など）で最短で正確な判断を下すために、各手法の長所・短所と使いどころを押さえておく必要がある。

## 詳細解説
- Flame Graph（フレームグラフ）  
  - 概要: 階層を水平方向の長さで表現する「逆アイシクル（inverted icicle）」型の隣接図。元はCPUスタック可視化で普及。  
  - 視認性: 長さの比較がしやすく、ラベル付けも可能。スライドや印刷でも高い情報密度を保てる。マウスオーバーで詳細表示、クリックでズームといったインタラクションが効く。  
  - 用途: 高レベルの比率把握、重要なトップ要素の発見、プロファイル解析（CPU/IO）に最適。

- Tree Map（ツリーマップ）  
  - 概要: 階層を面積で表す長方形の分割図。領域を詰めて配置できるため垂直空間を有効活用する。  
  - 視認性: 大きな要素はすぐ分かるが、細かい差分や深い階層の比較は苦手。ラベルが無い実装が多く、マウス操作が前提になる。  
  - 用途: デスクトップ／GUIで大量の要素を俯瞰したいとき。画面内に多くの箱を収めたい時に有効。

- Sunburst（サンバースト、円環図）  
  - 概要: フレームグラフを極座標にしたもの。階層が放射状に広がる。見た目の訴求力が高い。  
  - 課題: 面積・角度による比較が人間の知覚的に難しいため、深いスライスが視覚的に誇張されやすい（実際より大きく見える場合がある）。「見た目が正しい」とは限らない。  
  - 用途: デモや経営層向けのビジュアル訴求。ただし定量判断には向かない。

- コマンドライン／軽量ツール（du / ncdu 等）  
  - 概要: テキスト・ASCIIベースで階層をリスト表示。瞬時の確認やスクリプト運用に強い。  
  - トレードオフ: 1階層ずつしか見られないことが多く、全体俯瞰には視覚化が有利。

- 視覚化の知覚問題（重要）  
  - 長さ（Flame Graph）は比較が容易、面積（Tree Map）は中程度、角度（Sunburst）は最も比較が難しい。可視化を選ぶ際は「何を比較したいか」を基準にする。

## 日本市場との関連性
- 画面サイズ・スライド文化：日本のエンジニアは会議資料や社内レビューで可視化を紙・スライドに貼る機会が多い。印刷や静的キャプチャで意味を失わないFlame Graphは親和性が高い。  
- 大規模モノレポや組み込み開発：カーネルやドライバのような巨大階層を扱う現場では、トップダウンで比率を把握できる手法が重宝される。  
- SRE／運用現場：素早い一次切り分けにはCLIツール（du、ncdu）→可視化へ、といったワークフローが実用的。

## 実践ポイント
- 最初はdu / ncduでざっくり把握し、疑わしい箇所をFlame Graphで深掘りするワークフローを標準化する。  
- プレゼンやドキュメント向けの「静的キャプチャ」はFlame Graphがおすすめ。細部検査はTree Map、見栄え重視の社内共有にはSunburstを併用する。  
- ツール実装時は複数ビューを切替可能にする（長さ・面積・角度の違いがあるため）。ユーザーに「比較方法」を明示して誤解を避ける。  
- サンバースト表示を使う場合は数値ラベルを明示し、角度や深さによる錯覚を防ぐ。  
- 実データで検証する：どの可視化が有効かはデータセット次第。サンプルファイルシステムやプロファイルで比較テストを行う。  

短時間で正しい判断を下すには、「何を比較したいのか」をまず定義し、それに合った可視化を選ぶことが最短の近道である。
