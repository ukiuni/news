---
layout: post
title: "The Signature Flicker - シグネチャ・フリッカー"
date: 2025-12-30T08:18:40.900Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://steipete.me/posts/2025/signature-flicker"
source_title: "The Signature Flicker"
source_id: 46390154
excerpt: "Anthropicの新レンダラーで端末のチラつきを解消、選択やスクロールを守る描画法"
---

# The Signature Flicker - シグネチャ・フリッカー
ターミナルが本来の“手触り”を取り戻す瞬間──Claude Codeのフリッカー問題はこうして消えた

## 要約
AnthropicがClaude Codeの長年の「画面チラつき（flicker）」をカスタムレンダラーで解消した。重要なのは、なめらかな描画とターミナルのネイティブ操作性（選択、スクロール、検索）を両立できる点だ。

## この記事を読むべき理由
日本の開発現場でもターミナルベースの開発エコシステムは今なお重要。TUIやコーディングエージェントを導入・改良するなら、描画戦略のトレードオフ（alt-screen vs 差分レンダリング）を理解しておくべきだ。

## 詳細解説
- 問題点：従来の端末はインタラクティブ向けに設計されておらず、ANSIエスケープでカーソルを動かして上書きすると画面の「チラつき」が起きやすい。特に長時間動作する対話型UIで顕著。
- 解決アプローチ：
  1. alt-screen（代替画面）に切り替えて端末全体を制御する — 完全制御だが、テキスト選択やスクロールなど端末の既存機能が失われやすい。
  2. 差分レンダリングで変更箇所のみ慎重に再描画する（スクロールバックはそのまま） — 端末の機能性を保てるが実装は難しい。
- Anthropicの対応：Ink（Reactベースの端末レンダラー）では細かなインクリメンタル更新が不足していたため、Reactのコンポーネントモデルは維持しつつレンダラーをゼロから書き直し、v2.0.72でフリッカーを解消した。
- 周辺の取り組み：AmpやGoogle Geminiはalt-modeへ移行したがユーザー体験で課題が出た。OpenCodeやpiなどは差分手法で成功例を示している。Codexはプライマリバッファに留まり「端末らしさ」を優先している。

## 実践ポイント
- コーディングエージェント／TUIを作るなら、まず「端末のネイティブ操作」を失わせない設計を検討すること。
- 少数箇所の差分アップデートを実装してチラつきを抑える（行単位での差分や部分再描画の戦略を設計する）。
- alt-screenはダッシュボード向けに有効だが、選択・検索・スクロールが重要なユースケースでは慎重に。ユーザービリティを実機で必ず確認する。
- 既存ライブラリ（Inkやopentui等）の最新動向を追い、必要ならレンダラーをカスタムする判断をする。

