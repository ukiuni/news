---
layout: post
title: "We Didn’t “Align” — We Argued (and Shipped a Better System) - 私たちは「整合」しなかった — 議論してより良いシステムを出荷した"
date: 2026-01-16T21:04:56.348Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://dev.to/art_light/we-didnt-align-we-argued-and-shipped-a-better-system-1818"
source_title: "We Didn’t “Align” — We Argued (and Shipped a Better System) - DEV Community"
source_id: 3165035
excerpt: "議論でAPI仕様を先決めし型を契約化、バグと手戻りを劇的に削減"
image: "https://media2.dev.to/dynamic/image/width=1000,height=500,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Flk4yj01o8g2cb943zpxv.png"
---

# We Didn’t “Align” — We Argued (and Shipped a Better System) - 私たちは「整合」しなかった — 議論してより良いシステムを出荷した
ぶつかり合って信頼を作る：API仕様で「あとで直す」を止めるチームの実践

## 要約
開発チームが表面的に「整合（aligned）」しているだけだと、本番直前にバグの連鎖が起きる。議論を避けずにAPI仕様を早めに決め、型を生成して契約として扱ったら、品質と会話の質が劇的に改善した、という実体験。

## この記事を読むべき理由
日本の現場でも「空気を壊さない調整」が優先されがちで、実はその沈黙が後で大きな手戻りを生むことがあります。特にフロントエンド（React+TypeScript）とRESTバックエンドを並行開発するチームや、ベンダー分業・外注を多用するプロジェクトでは、本記事の考え方で手戻りを減らせます。

## 詳細解説
- 背景（問題の本質）  
  複数人が並行で作業すると、フロントは「ここにこのフィールドがあるはず」と期待し、バックはレスポンス形をリファクタしてしまう。型は存在しても“同じ宇宙”にない、という状態が続き、微妙なバグが増える。

- ターンポイント（議論の価値）  
  「APIを先に定義しない？」という問いが発端になり、賛否の議論を避けずに交わした。結果、単なる合意文言ではなく、実務上の“契約”として仕様を運用する方針に落ち着いた。

- 実際に採った施策（実用的なAPI-first）  
  1. OpenAPIなどで早期にAPI仕様を定義  
  2. その仕様からフロント用の型を自動生成  
  3. 破壊的変更は「破壊的」として扱い、レビューと同期を必須化  
  トレードオフとして、バックが名前変更などで自由にできなくなり、仕様の管理に手間が増えるが、得られる利点は確実に大きい。

- 人的効果（技術以外の恩恵）  
  仕様があると議論の焦点が「なぜフィールドがある／ないか」に移る。命名や責務の整理が強制され、設計レビューが形骸化せず実効性を持つようになった。

- やらかし例（現実的な注意点）  
  1. 初期に過度に厳密化して後で緩める必要が出た  
  2. 仕様PRが巨大化してレビューがつらくなった  
  3. APIを壊して型生成を忘れ、フロントが壊滅した（泣き話）  
  重要なのは「議論でミスが無くなるわけではないが、早く・安く気づける」こと。

## 実践ポイント
- まずは小さく始める：最重要エンドポイントだけをOpenAPIで定義してみる。  
- 型自動生成をCIに組み込む：specの差分で自動生成→差分チェックするだけで事故が減る。  
- 仕様変更ルールを作る：破壊的変更は必ずフロント側承認を得る、対応ガイドをPRテンプレに入れる。  
- スペックは「ドキュメント」兼「契約」：命名・責務の議論を記録し、設計決定履歴として残す。  
- ツール例：OpenAPI / Swagger、openapi-generator／swagger-codegen、TypeScript用コードジェネレータ、契約テスト（PACTなど）。  
- 避けるべきこと：最初から全部細かく書きすぎない、生成済みコードの更新忘れを防ぐ自動化。

短期の「早く作る」方針を続けると長期で大きな負債になる。議論を避けず仕様を可視化することで、チームの信頼とコードの安定性を同時に高められる――日本の職場文化でも応用しやすい現実的なアプローチです。
