---
layout: post
title: "Prompt Engineering Won’t Fix Your Architecture - プロンプト工学はアーキテクチャを直さない"
date: 2026-01-12T07:23:14.383Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://dev.to/art_light/prompt-engineering-wont-fix-your-architecture-23h"
source_title: "Prompt Engineering Won’t Fix Your Architecture - DEV Community"
source_id: 3159341
excerpt: "プロンプトでは隠せない設計欠陥がAI導入で暴かれ、運用コストと信頼性を壊す危険とは？"
image: "https://media2.dev.to/dynamic/image/width=1000,height=500,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F5nxsr2wjb1ans1cl4pia.png"
---

# Prompt Engineering Won’t Fix Your Architecture - プロンプト工学はアーキテクチャを直さない
プロンプトでごまかすな：AIが暴露するシステム設計の弱点

## 要約
プロンプト調整だけでは、散らかった設計や欠落したドメイン境界を修復できない。むしろLLMは既存のアーキテクチャ欠陥を「英語で」露呈する ― それが今回の主張です。

## この記事を読むべき理由
日本でもAI機能を急いで追加するプロダクトが増えています。見映えの良いデモに頼って運用すると、コストや信頼性、法令順守で痛い目を見る可能性が高い。AI導入で失敗しないために、プロンプトに頼る前に押さえるべき設計のポイントを短く整理します。

## 詳細解説
- LLMは製品を「理解」しているわけではない  
  モデルは渡されたJSONやトークン窓に入った文脈だけを元に動きます。したがって「挙動がおかしい」時は、多くの場合モデルが勝手にやっているのではなく、壊れた抽象（欠落したデータや矛盾したスキーマ）に従って忠実に動いているだけです。

- プロンプトは高価な絆創膏  
  欠落したドメイン境界や分散したビジネスルールを、長大なプロンプトや条件分岐で補おうとすると、保守性とコストが急激に悪化します。プロンプト工学は素早く目に見える解決策に見えるため流行しますが、本質的な設計問題は残ります。

- AIは分散システム的に振る舞う  
  エージェントを作ると、状態管理、遅延、失敗モード、重複副作用など分散システムの問題が現れます。例えば「二重課金」「処理の重複実行」「不正確な再試行」は、LLM特有のバグではなく古典的な分散系の落とし穴です。

- ガードレールは万能ではない  
  バリデーション、ルールチェック、ヒューマンレビューは重要ですが、操舵輪がない車にシートベルトを付けるようなもの。多くの「ガードレール」は結局追加のプロンプトや条件分岐に過ぎず、根本的な設計欠陥を直しません。

- AIはアーキテクチャを増幅する  
  良い設計はAIを「退屈」にし、予測可能で安全な振る舞いをさせます。悪い設計は一時的に魔法のように見せますが、実運用で脆弱性として顕在化します。

## 実践ポイント
1. ドメイン境界を明確にする  
   - ビジネスルールの単一の「ソース・オブ・トゥルース」を定義する。スキーマと契約をAPIレベルで固定する。

2. ビジネスロジックを分散させない  
   - ロジックはコントローラやcron、チャットに分散させず、サービス層やドメインモデルに集中させる。

3. 構造化データを渡す  
   - モデルにはなるべく構造化（正規化されたJSON）と最小の文脈を渡し、プロンプトに依存しすぎない設計にする。

4. トークン窓とコストを意識する  
   - 長いプロンプトで「説明して済ます」設計はコスト増と遅延に直結する。必要な情報だけを短く正確に渡す。

5. 可観測性と冪等性を整備する  
   - リクエスト/応答のログ、トレース、入出力スキーマ検証、重複実行対策を取り入れる。

6. テストとフェイルセーフを導入する  
   - 自動化テスト、異常系の検証、ヒューマンインザループの最小化（必要時のみ）を実装する。

7. ガードレールは補助に留める  
   - プロンプトやランタイムのルールは最後の抑止策として使い、根本は設計で解決する。

短期的にはプロンプトで驚きを作れますが、長期的な信頼性・コスト・法令順守を確保するには設計へ投資することが近道です。AIは「話すシステム」を作る前に、まず「正しいシステム」を作ったかどうかを試す鏡になります。
