---
layout: post
title: "Building a better Bugbot - より良いBugbotの作り方"
date: 2026-01-16T08:00:02.858Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://cursor.com/blog/building-bugbot"
source_title: "Building a better Bugbot · Cursor"
source_id: 46643737
excerpt: "Bugbotの実運用設計と解決率改善でレビュー工数半減、Autofixで自動修正へ進化"
image: "https://ptht05hbb1ssoooe.public.blob.vercel-storage.com/assets/blog/bugbot-og-image.png"
---

# Building a better Bugbot - より良いBugbotの作り方
驚くほど賢くなった「Bugbot」――人間のレビュー工数を減らすコードレビューロボの進化と設計の裏側

## 要約
Cursorが開発したコードレビューエージェント「Bugbot」は、並列パス＋検証モデルと「解決率（resolution rate）」というAI指標で品質を定量化し、リリース以降の実験で解決率を52%から70%以上へ向上させた。最近はエージェント型アーキテクチャや自動修正（Autofix）へ展開している。

## この記事を読むべき理由
- 日本でもプルリク文化とCIが普及し、レビュー負荷や見逃しは現場の大問題。Bugbotの設計は「実運用で使える自動レビュー」を目指した実践知で、日本のチームでも参考になる。
- 単なるモデル精度の話ではなく、実運用（Git統合、レート制限、ルール化、メトリクス）まで踏み込んでいるため、導入検討や改善案の具体的示唆が得られる。

## 詳細解説
- 背景と目的
  - コーディング用エージェントが賢くなるにつれ、人間のレビュー工数が増える逆説が発生。BugbotはPR段階でロジック不具合、性能問題、セキュリティ脆弱性を指摘し、レビュー負荷と本番バグを減らすことを狙う。

- 初期戦略：多様な推論経路で精度を稼ぐ
  - 「8並列パス」で差分の並び順をランダム化して複数の独立した検出を行い、同一の問題を複数パスが指摘したものを強いシグナルと扱う（多数決）。
  - 検出後は類似レポートをバケット化して一つの説明に統合、不要カテゴリのフィルタリング（コンパイラ警告やドキュメント差分など）を挟み、最後に別のバリデータモデルで誤報を取り除く。

- プロダクション化のための周辺インフラ
  - Git統合をRustで再構築し、取得データ量を削減して高速化。GitHubのレート制限に対応するためのモニタリング、リクエストバッチ、プロキシ基盤を整備。
  - ルールエンジンを追加し、組織固有の不変条件（危険なマイグレーション、社内APIの誤使用など）をハードコードせずにチェック可能にした。

- 測定指標：resolution rate（解決率）
  - PRマージ時にAIで「Bugbotの指摘が最終コードで実際に修正されたか」を判定する指標を導入。感覚やコメント数よりも直接的に「実際に直されたか」を測るため、改善の尺度として有効だった。
  - この可視化により、A/B的な改良（オンライン評価）やオフラインのベンチマーク（BugBench）での反復が可能になった。

- 最も効いた改善：エージェント化とプロンプトの見直し
  - 固定シーケンスのパスから「エージェント」が差分を読み、ツール呼び出しや掘り下げ場所を自律決定する設計へ移行。
  - これにより、静的コンテキストを減らして動的に必要情報を取得させる形が有効に働いた。ただし初期は慎重すぎて検出を抑えすぎたため、「疑わしいパターンは積極的に調べる」方向の攻めたプロンプトに調整した。
  - ツール設計の小変更がモデル挙動に大きく効くため、ツールAPIの反復改善を重ねた。

- 成果と今後
  - 40回以上の主要実験で解決率を52%→70%超、1回あたりの指摘数は0.4→0.7に増加。PRあたり解決されたバグ数は約0.2→0.5へ倍増。
  - BetaでのAutofix（検出したバグを自動修正するCloud Agent）を公開。今後は「自己検証のために実際にコードを実行する」「常時スキャン（常時オン）」などを検討。

## 実践ポイント
- まずは「解決率」を採用して効果を数値化せよ：単なる指摘数や反応よりも、実際に修正されたかを測る指標が改善の羅針盤になる。
- 並列パス＋多数決は誤報を減らす実務的テクニック：差分の順番や小さなランダム性でモデルの推論多様性を獲得できる。
- エージェント化は強力だがプロンプト設計が鍵：慎重すぎると見逃し、攻めすぎると誤報増。現場ルールやバリデータでバランスを取る。
- CI／リポジトリ統合のインフラ投資は必須：レート制限やデータ取得量の最適化、社内ルールの外部化（ルール定義）を早期に整えると運用コストが下がる。
- 日本企業向けの注意点：誤報による信頼損失は導入障壁になるため、まずは限定チームで導入→解決率で効果を示し、ルール化で社内慣習に合わせる流れが現実的。

短時間で読めて、実務に活かせるポイントを中心にまとめた。Bugbotのアプローチは「モデル性能」だけでなく「運用と計測」に投資する点が肝なので、日本の開発チームでも参考になる要素が多い。
