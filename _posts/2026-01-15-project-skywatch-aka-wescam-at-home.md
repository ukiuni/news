---
layout: post
title: "Project SkyWatch (a.k.a. Wescam at Home) - Project SkyWatch（自作Wescam）"
date: 2026-01-15T06:15:40.134Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://ianservin.com/2026/01/13/project-skywatch-aka-wescam-at-home/"
source_title: "Project SkyWatch (AKA Wescam at home) - Ian Servin"
source_id: 46618503
excerpt: "低コストPTZカメラを画像追跡・カルマン予測・PIDで仮想ジンバル化し航空機を高精度にロック＆追尾"
image: "https://ianservin.com/wp-content/uploads/2026/01/20260113-SkyWatch-cover-image-scaled.jpg"
---

# Project SkyWatch (a.k.a. Wescam at Home) - Project SkyWatch（自作Wescam）
自宅のPTZカメラでヘリ搭載のEO/IRのように飛行機を「ロック＆追尾」する――安価機材で作る仮想ジンバルと予測制御

## 要約
安価なPTZカメラの物理的制約を、画像トラッキング＋カルマン予測＋PID＋デジタル手ぶれ補正で補い、地上から航空機を安定して追跡する仕組みを紹介するプロジェクト。ADS-Bデータと突き合わせることで、映像に意味づけも行う。

## この記事を読むべき理由
市販のPTZカメラで「動く対象を精度よく追う」技術は、航空スポッティング、防災・緊急対応、研究や趣味の観測まで幅広く使えます。高価なEO/IR装置を買えない日本の技術者やホビイストにとって、実装方針と実践ポイントが得られます。

## 詳細解説
- ハードウェアの制約  
  市販のPTZカメラ（例：20xズームの廉価モデル）は、モーターが遅く、ギアの遊びや内部のダンピングが大きい。ジェット機レベルの速さで動く対象をそのまま追おうとすると、命令と実際の追従に大きな遅延が生じる。

- ソフトウェアで埋める設計思想  
  物理的な限界を補うため、動きの「先読み」と「仮想的な安定化」をソフト側で行う。主要要素は以下。

  1. 視覚トラッキング（OpenCV + CSRT）  
     CSRTトラッカーは、単純な閾値や色差より堅牢に物体の特徴（テクスチャやチャンネル情報）を追う。各フレームで対象の画面上のずれ（ピクセル誤差）を算出し、制御ループの入力にする。

  2. 予測（カルマンフィルタ）  
     トラッキングはノイズと遅延を抱えるため、カルマンフィルタで状態（位置・速度）を推定・予測する。これにより約200ms先の位置を予測して制御に使う。一般的な線形カルマンの予測・更新は次の形で表せる：
     $$x_{k|k-1}=A x_{k-1|k-1}+B u_{k-1}$$
     $$P_{k|k-1}=A P_{k-1|k-1} A^\top + Q$$
     ここで $x$ が状態、$P$ が誤差共分散、$Q$ がプロセスノイズ。

  3. 制御（PID + フィードフォワード）  
     通常のPID制御に、カルマンの推定速度をそのままモータ入力へ渡す「フィードフォワード」を加える。PIDは位置ずれに対する補正、フィードフォワードは速度に対する先回り制御を担う。PIDの式は
     $$u(t)=K_p e(t) + K_i \int e(t) dt + K_d \frac{de}{dt}$$
     さらに、ターゲットまでの角度差に応じて速度上限を動的に変えることで、ターゲット取得時は高速に回し、ロック後は微小ステップで精度を稼ぐ。

  4. 「仮想ジンバル」＝デジタル安定化  
     ハードのギア遊びや電子的なダンピングで残る微振動は、カメラ映像のセンサ領域を少しクロップしてフレーム内で補正（ピクセル単位で移動）することで打ち消す。結果的に、物理ジンバルと同等に見える安定化が実現できる。

  5. データ融合（ADS-B）  
     カメラの方位・仰角が分かるため、ローカルADS-B受信機（dump1090/tar1090等）から得た航空機情報と照合して視認対象の正体を推定できる。これにより「ただ追っている映像」から「特定機の追跡」へ意味づけが可能になる。

## 実践ポイント
- まずは安価なPTZ（20x程度）とラズパイ＋USB接続のADS-B受信機で環境を構築する。ADS-Bは日本でも趣味の受信機が増えているため導入は容易。
- ソフトウェアスタックの候補：OpenCV（CSRTトラッカー）、カルマンは filterpy / pykalman など、制御ループは自作か小型のPIDライブラリ。表示はローカルのWeb UI（tar1090連携）で十分実用的。
- レイテンシ対策：映像パイプライン（エンコード/転送）とモータ制御の遅延を計測し、カルマンの予測時間に反映する（例：200ms）。遅延は実測で調整するのが最重要。
- デジタル安定化のやり方：センサの余白を残して少しクロップ、1フレームごとにサブピクセルで平行移動して補正すると高倍率でのジッタが減る。
- 法律・モラル：航空機撮影や長時間監視は法的・倫理的配慮が必要。公共性やプライバシーの点で地域ルールを確認すること。

参考：このプロジェクトはOSSとして公開されており、実装とチューニングの具体例が得られる（MITライセンス）。日本での航空観測や防災用途にも応用しやすいアプローチなので、まずはトラッキングと予測の組み合わせを試してみると良い。


