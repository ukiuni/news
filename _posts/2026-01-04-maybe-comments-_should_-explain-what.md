---
  layout: post
  title: "Maybe Comments _Should_ Explain 'What' - コメントは「何」を説明すべきか"
  date: 2026-01-04T12:09:19.130Z
  categories: [tech, world-news]
  tags: [tech-news, japan]
  source_url: "https://www.hillelwayne.com/post/what-comments/"
  source_title: "Maybe Comments SHOULD Explain &#39;What&#39;"
  source_id: 46486780
  excerpt: "大規模分散コードでは短い「what」コメントが調査時間とバグを劇的に減らす"
---

# Maybe Comments _Should_ Explain 'What' - コメントは「何」を説明すべきか
「コメントは“なぜ”だけでなく“何をしているか”も書こう」——メソッド分割と文脈切り替えを考え直す短く強烈な反論

## 要約
コメントは原則としてコードの「なぜ」を説明するべき、という定説への反論。分割やリファクタで読者が何度もスクロール／ジャンプするコストが高い場合、短い「what」コメントが理解の生産性を上げることがある、という主張。

## この記事を読むべき理由
日本の開発現場でも「クリーンコード重視でコメントを減らす」流れがあるが、規模が大きくメソッドが分散するプロジェクトや運用中のバグ対応では、適切な「what」コメントがミスを防ぎ、調査時間を短縮する現実的な武器になるため。

## 詳細解説
- 通説：コメントは「なぜ（why）」を書き、コード自体で「何（what）」を示すべき、という考え方が広まっている。良い命名と関数分割でコードが自明になるのが理想。
- 著者の反論ポイント
  - 名前だけで済ませると、別場所で変数や処理を見たときに元の意味に戻るためにコンテキスト切り替えが発生し、誤解や取り違え（wがweightかwidthか）が起きうる。
  - 「なぜ」をコミットメッセージやテストに書く運用もあるが、該当行に近い場所に情報がなければ調査が面倒になり、結果として誰も調べず不適切に削除や変更が行われるリスクがある。
  - リファクタで細かくメソッドを抽出すると、一見読みやすくなるが、理解するには複数メソッドを行き来する必要が出るケースがある。そうしたときにファイル内の短い「what」コメントは有効。
- 実例（要点）
  - 1つのreplace関数を多数の小メソッドに分割する代わりに、同じ関数内に短いコメントを置くことで「いま何をしているか」が一目で分かり、デバッグ時のスクロールが減る、という比較。
- ただし強調点：これは「コメントで手抜きして良い」という免罪符ではない。まずは名前・構造で明確にし、コメントは補助（補強）として使うのが正解。

## 実践ポイント
- まずは命名・抽出で分かりやすくする。コメントは最終手段ではなく補助的役割で。
- 小さな「what」コメントは許容範囲：複数箇所を行き来しないと理解できないなら、その場に短く書く。
- 「why」は可能な限りコード近くに残す（チケットやPRへの短いリンクを添えると有効）。
- コメントは具体的に：冗長な説明は避け、何を期待しているか／何を保護しているかを一文で。
- リファクタ後に必ずコメントとテストを見直す。コメントが古くなると誤導になるので、更新ルールを決める。

短く言えば「コメント禁止」ではなく「適材適所」。読み手のコスト（スクロールやgit追跡）を下げる選択が正解のことも多い。
