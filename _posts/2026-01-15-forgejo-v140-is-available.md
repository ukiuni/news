---
layout: post
title: "Forgejo v14.0 is available - Forgejo v14.0 が利用可能に"
date: 2026-01-15T15:43:04.655Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://forgejo.org/2026-01-release-v14-0/"
source_title: "Forgejo v14.0 is available"
source_id: 1418798991
excerpt: "Forgejo 14がCodeMirror採用とActions改善でセルフホスト運用を快適化"
---

# Forgejo v14.0 is available - Forgejo v14.0 が利用可能に
もう重くない！Forgejo 14でセルフホストのコードコラボがぐっと快適になる理由

## 要約
軽量エディタへの切替、JSなしで動くUI強化、Actionsの信頼管理やキュー可視化、データベースの信頼性向上など、日常的な使い勝手と運用信頼性を同時に磨いたメジャーアップデートです。

## この記事を読むべき理由
日本でもプライバシーや法令順守のためにセルフホストのGitホスティングを選ぶ組織は増えています。Forgejoは軽量・コミュニティ主導の選択肢で、本バージョンは“現場での使いやすさ”と“運用の安全性”に直結する改善を多数含みます。管理者も開発者も把握しておきたい変更点がまとまっています。

## 詳細解説
- UIと使い勝手
  - Issue/PR検索に簡単インラインフィルタが追加され、ドロップダウンと併用可能。日常の絞り込みが直感的に。
  - WebエディタをMicrosoftのMonacoからCodeMirrorへ差し替え。単一ファイル編集の起動性・モバイル対応・アクセシビリティが改善され、重さや読み込み遅延が解消されます。
  - コメント投稿など、JavaScript無しでも動く要素が増加。軽量環境やJSポリシーの厳しい運用で恩恵があります。

- Forgejo Actions（CI/CD 相当）
  - プルリクエスト起点でのワークフロー実行に対する「Approve once / Approve always / Deny」など細かい信頼設定が追加され、潜在的な悪用を管理しやすく。
  - ジョブが「特定ラベルのランナー待ち」で止まっている場合、その理由をUIで表示。トラブルシュートが容易に。
  - concurrency（同時実行制御）対応、動的マトリクスや runs-on を先行ジョブで決める機能をサポートし、柔軟なワークフロー設計が可能に。

- セキュリティとリスク低減
  - authorized_keys を起動時に検証し、想定外の公開鍵があれば起動を停止して管理者に対処を促します（設定で許可可能）。不正アクセスリスクの早期発見に有効。
  - CSRF対策がステートレス化され、長時間開いたタブでも操作が継続できるように。ブラウザの Fetch Metadata ヘッダを利用した方式です。

- データベースと運用
  - 長年問題を引き起こしてきたデッドロックで発生する「-1 表示」などの不整合が大幅に改善。
  - 一部テーブルに外部キーが追加され、データ整合性がデータベースレベルで守られるようになります。移行時に不整合レコードがあれば自動で削除・修正され、ログに記録されます（機能的な影響はない想定）。
  - 既存の Actions 実装バグにより `commit_status` テーブルに冗長なレコードが蓄積している事例があり、cleanup用コマンドが提供されました。大規模インスタンスでは数百万〜千万件が削除対象になることがあります。

- 管理者向け注意
  - アップグレード前に必ずフルバックアップを取得し、リリースノートの「breaking changes」を確認すること。
  - `forgejo doctor cleanup-commit-status` コマンドは事前に --dry-run で挙動確認を。SQLite で運用している場合はロックやパフォーマンスに注意し、必要なら Forgejo を停止して実行するか、`--delete-chunk-size` を小さく設定してください。

例（dry-run）:
```bash
$ forgejo doctor cleanup-commit-status --dry-run
```

## 実践ポイント
- まずステージングでアップグレード手順を通してテスト。公式のアップグレードガイドに従いフルバックアップを取得する。
- Actions を多用している組織は「Commit Status Cleanup」コマンドを dry-run で実行し、削除量と実行時間を把握する。SQLite の場合は chunk サイズを小さくするかメンテナンス時間に実行。
- セキュリティポリシーに合わせて authorized_keys の挙動や CSRF 設定を確認。公開鍵の意図しない追加がある環境では特に注意。
- 開発者側は新しいエディタ（CodeMirror）やJSなしでの操作感を試し、社内ワークフローへの影響を確認する。
- 大規模運用ではデータベース移行ログを監視し、外部キー作成時の不整合報告を確認して必要に応じて対処する。

以上を踏まえ、まずはテスト環境で v14 を触ってみることを推奨します。アップグレード後は「軽く」「より安全に」日常作業が回るはずです。
