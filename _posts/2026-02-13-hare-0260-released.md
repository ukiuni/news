---
layout: post
title: "Hare 0.26.0 released - Hare 0.26.0 リリース"
date: 2026-02-13T14:45:07.211Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://harelang.org/blog/2026-02-13-hare-0.26.0-released/"
source_title: "Hare 0.26.0 released"
source_id: 779986764
excerpt: "Hare 0.26.0、for..elseとDragonflyBSD対応で低レイヤ開発が実用的に"
image: "https://harelang.org/mascot.png"
---

# Hare 0.26.0 released - Hare 0.26.0 リリース
Hare 0.26.0：ループが値を返す新構文とDragonflyBSD対応でシステム開発がさらに実用的に

## 要約
Hare 0.26.0 がリリースされました。for..else＆ループ値、DragonflyBSDサポート、エラー無視/パディング/未初期化変数の明示的サポートなど、システム言語としての実用性を高める小〜中規模の改良が中心です。

## この記事を読むべき理由
手作業メモリ管理・最小ランタイムを好む日本の組込み／OS／低レイヤ開発者にとって、ループで値を返す構文や未初期化変数の明示はコード表現力と実用性を大きく向上させます。BSD系（特にDragonflyBSD）対応はサーバ／OS研究の選択肢を広げます。

## 詳細解説
- リリース概況  
  - ダウンロード: harec-0.26.0.tar.gz / hare-0.26.0.tar.gz / hare-update-0.26.0.0.tar.gz  
  - qbe 1.2 と互換性あり。メンテナ参加：Joe Finney が正式メンテナに加入。

- ループ値と for..else  
  for ループが式として値を返せるようになりました。break に値を与えるか、ループ末尾に else ブロックを置いて値を供給します。例：
  ```hare
  const item = for ( let sample .. items ) {
      if ( item.key == key ) { break item; };
  } else {
      fmt::errorfln("Warning: item with key {} not found", key)!;
      return;
  };
  do_work(item);
  ```
  - break で得た値が式全体の結果になる。else はループが値を返さなかった場合の代替値（あるいは never 型の処理）を提供する。

- DragonflyBSD サポート  
  Michael Neumann による DragonflyBSD ポート追加で、主要なBSD系プラットフォームのカバレッジが拡大。BSD上でのビルド・テストを行う日本のプロジェクトに恩恵あり。

- エラーを明示的に無視する構文  
  これまでの void キャストの回避策に代わり、結果を _ に代入して明示的にエラーを無視できます:
  ```hare
  _ = os::remove("/some/file");
  ```
  - assert 的な挙動はしないので注意。

- 構造体のパディング用の `_` フィールド  
  @offset より簡潔に未命名フィールドでパディングを指定可能:
  ```hare
  export type my_struct = struct @packed {
      x: u32, // offset: 0
      _: u8,  // offset: 4
      y: u64, // offset: 5
  };
  ```

- 明示的未初期化 (@undefined)  
  宣言時初期化を要求する既存方針は維持しつつ、例外的に明示的未初期化を許可。ポインタを後で初期化する等のユースケースで有効:
  ```hare
  let x: my_object = @undefined;
  let x = my_object { foo = 1, bar = 2, @undefined ... };
  ```
  - 読み出し前の初期化はプログラマ責任。使用は慎重に。

## 実践ポイント
- まず harec/hare-update を 0.26.0 に更新し、qbe が 1.2 であることを確認する。  
- for..else を使って探索・選択ロジックを簡潔化する。break に値を渡すパターンを探してみる。  
- エラーを意図的に無視する箇所は `_ = ...` を使って可読性を上げる。  
- パディング制御は unnamed `_` フィールドで簡潔に。@offset より可読。  
- @undefined は便利だが未初期化アクセスの危険があるため、単体テストとコードレビューを強化すること。  
- DragonflyBSD でのビルド・動作確認を行えば、BSD系環境での採用検討に有利。

元記事: Hare 0.26.0 released (Drew DeVault, 2026-02-13)
