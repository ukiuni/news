---
layout: post
title: "Rust in the NetBSD Kernel, and other odd decisions - NetBSDカーネルのRust導入とその他の“奇妙な決断”"
date: 2026-02-03T06:41:19.970Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://bentsukun.ch/posts/netbsd-rust-kernel/"
source_title: "Rust in the Kernel, and other odd decisions &middot; benzblog"
source_id: 1601935565
excerpt: "多様アーキでの維持負担が阻むNetBSDのカーネルRust導入とLua実装例"
---

# Rust in the NetBSD Kernel, and other odd decisions - NetBSDカーネルのRust導入とその他の“奇妙な決断”
なぜNetBSDはカーネルにRustを入れない（/入れにくい）のか？Lua導入の実例から見る現実的な判断

## 要約
FreeBSDで話題の「カーネルにRust」を、NetBSDの視点から冷静に検証すると「技術的・運用的ハードル」が理由で現実的には難しい。代替としてLuaのカーネル組み込みという変わった選択が既に存在する。

## この記事を読むべき理由
カーネル言語の選択は安全性・移植性・保守性に直結します。日本の組込みやネットワーク機器、古いアーキテクチャを扱う現場にとって、今回の議論は将来の開発方針や技術投資判断に直接関わります。

## 詳細解説
- Rust採用の魅力：メモリ安全性（所有権システム等）によりバグ／脆弱性を減らせるため注目されている。若手開発者の関心も高いが、採用動機は「見た目のトレンド」より「安全性や性能」寄り。
- NetBSDの立場：伝統的に保守的。多種多様なCPUアーキテクチャ（組込み向け含む）で動くことを重視するため、新言語の導入には慎重。
- 実践的な障壁：
  - Rustコンパイラが全アーキテクチャで利用できない（クロスコンパイルやターゲットサポート不足）。
  - pkgsrcでのRust維持は少数の人手に依存しており、安定運用にコストがかかる。
  - NetBSDは「ソースからビルドできる」ことを重要視するが、Rust周りはバイナリブートストラップに頼るケースが多く矛盾が生じる。
  - Rustコンパイラ自体をbaseに入れると保守負担が増加（ただしLLVMがすでにbaseにある点は導入の論拠になる）。
  - リリースサイクルの不整合：NetBSDは過去2つのメジャーをサポートする方針だが、Rustは高速にバージョンが進み、古いバージョンでは現代のコードがビルドできない例がある。
- 既にあった「奇妙な決断」：NetBSDは一例としてLuaをカーネル側に組み込んでいる。これはドライバなどのプロトタイピングを高速化する実用的な選択で、必ずしも「奇」を禁じ得ない合理性がある。

## 実践ポイント
- まずはユーザー空間（userland）でRustを試す：カーネル導入より導入コストが低く、安全性の恩恵を受けやすい。
- 組込み／古いアーキテクチャを扱うなら、Rustツールチェーンのターゲットサポート状況を確認する。
- NetBSDやpkgsrcのメーリングリスト、FreeBSDの動向を追い、実装面（bootstrapやbaseへの統合）の議論をチェックする。
- 小さく始める：ドライバ試作はLuaやユーザランドのテストで素早く検証してから、より厳密な言語切替を検討する。
- 貢献機会：Rustを各アーキテクチャで動かすためのクロスビルドやパッケージ維持はコミュニティ貢献の余地が大きい。

短いまとめ：Rustは魅力的だが、NetBSDの多様なターゲットと運用方針を考えるとカーネル導入は容易ではない。まずは現実的な「ユーザランドでの採用」「プロトタイプ手法の改善」から始めるのが現場向けの現実解。
