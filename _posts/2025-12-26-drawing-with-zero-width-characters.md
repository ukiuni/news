---
layout: post
title: Drawing with zero-width characters - ゼロ幅文字で描画する
date: 2025-12-26 23:09:11.356000+00:00
categories:
- tech
- world-news
tags:
- tech-news
- japan
source_url: https://zw.swerdlow.dev
source_title: Dۭۭۭۭۭۭۭۭۭۭۭۣۭۭۭۭۭۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢrۭۭۭۭۭۭۭۭۭۭۭۣۣۣۭۭۭۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢaۭۭۭۭۭۭۭۭۭۭۭۣۣۣۣۭۭۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢwۭۭۭۭۭۭۭۭۭۭۭۭۣۣۣۣۭۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢiۭۭۭۭۭۭۭۭۭۭۭۭۭۣۣۣۭۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢnۭۭۭۭۭۭۭۭۭۭۭۭۭۣۣۣۭۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢgۭۭۭۭۭۭۭۭۭۭۭۭۭۣۣۣۭۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢ
  ۭۭۭۭۭۭۭۭۭۭۭۭۭۭۣۣۭۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢwۭۭۭۭۭۭۭۭۭۭۭۭۭۭۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢiۭۭۭۭۭۭۭۭۭۭۭۭۭۭۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢtۭۭۭۭۭۭۭۭۭۭۭۭۭۭۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢhۭۭۭۭۭۭۭۭۭۭۭۭۭۣۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢ
  ۭۭۭۭۭۭۭۭۭۭۭۭۭۣۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢZۭۭۭۭۭۭۭۭۭۭۭۣۣۣۣۣۣۣۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢeۭۭۭۭۭۭۭۭۭۭۭۣۣۣۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢrۭۭۭۭۭۭۭۭۣۣۣۣۣۣۣۣۭۭۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢoۭۭۭۭۭۭۣۣۣۣۣۣۣۣۣۣۭۭۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢ-ۭۭۭۭۭۣۣۣۣۣۣۣۣۣۣۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢWۭۭۭۭۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢiۭۭۭۭۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢdۭۭۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢtۭۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢhۭۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢ
  ۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۢۢۢۢۢۢۢۢۢۢۢۢۢۢۢCۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۜۢۢۢۢۢۢۢۢۢۢۢۢۢۢhۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۜۜۢۢۢۢۢۢۢۢۢۢۢۢۢۢaۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۜۜۜۢۢۢۢۢۢۢۢۢۢۢۢۢrۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۣۭۜۜۜۜۢۢۢۢۢۢۢۢۢۢۢۢaۣۣۣۣۣۣۣۣۣۣۣۣۣۭۭۭۣۭۭۜۜۜۜۜۢۢۢۢۢۢۢۢۢۢۢcۣۣۣۣۣۣۣۣۣۣۣۣۭۭۭۭۭۭۭۜۜۜۜۜۜۢۢۢۢۢۢۢۢۢۢۢtۣۣۣۣۣۣۣۣۣۣۣۣۭۭۭۭۭۭۭۜۜۜۜۜۜۜۢۢۢۢۢۢۢۢۢۢeۣۣۣۣۣۣۣۣۣۣۣۣۭۭۭۭۭۭۭۜۜۜۜۜۜۜۜۢۢۢۢۢۢۢۢۢrۣۣۣۣۣۣۣۣۣۣۣۣۣۭۭۭۭۭۭۜۜۜۜۜۜۜۜۜۢۢۢۢۢۢۢۢsۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۭۭۭۜۜۜۜۜۜۜۜۜۜۜۢۢۢۢۢۢۢ
  ۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۜۜۜۜۜۜۜۜۜۜۜۜۜۜۢۢۢۢۢ ۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۭۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۢۢۢ
  ۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۣۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۢۢ ۣۣۣۣۣۣۣۣۣۣۭۭۭۣۣۣۣۭۣۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۢ
  ۣۣۣۣۣۣۣۭۭۭۭۭۭۭۭۣۭۣۭۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۢ ۣۣۣۣۣۣۭۭۭۭۭۭۭۭۭۣۭۭۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜ ۣۣۣۣۣۭۭۭۭۭۭۭۭۭۭۭۭۭۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜ
  ۣۣۣۣۭۭۭۭۭۭۭۭۭۭۭۭۭۭۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜ ۣۣۣۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜۜ ۣۣۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۜۜۜۢۜۜۢۢۢۢۜۜۜۜۜۜۜۢ
  ۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۢۢۢۢۢۢۢۢۜۜۜۜۜۜۜۢۢ ۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۢۢۢۢۢۢۢۢۢۜۜۜۜۜۜۢۢ ۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۢۢۢۢۢۢۢۢۢۜۜۜۜۜۜۢۢ
  ۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۢۢۢۢۢۢۢۢۢۜۜۢۜۜۜۢ ۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۢۢۢۢۢۢۢۢۢۜۢۢۜۜۜۢ ۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۭۢۢۢۢۢۢۢۢۢۢۢۢۜۢۢ
source_id: 46395061
excerpt: ゼロ幅文字と結合記号で隠し絵や注釈を作り、表示差や正規化対策まで実践解説
---
# Drawing with zero-width characters - ゼロ幅文字で描画する

## 要約
ゼロ幅文字（Zero‑Width Characters）と結合文字（combining marks）を組み合わせることで、テキストの「見た目」を壊さずに画像的なパターンや隠し情報を埋め込む手法を解説する。表現の幅とプラットフォーム依存性、実用上の注意点を日本の開発者向けにまとめた。

## この記事を読むべき理由
チャットやSNS、コードレビュー、ドキュメントに視覚的工夫やステガノグラフィ（隠し情報）を入れたい、一風変わったUI表現や検証サンプルを作りたい、日本語環境（LINE、Slack、GitHub など）で表示の差分に悩んでいるエンジニアは知っておくべきテクニックです。

## 詳細解説
- 技術の核
  - 「ゼロ幅文字」：U+200B（ZWSP）、U+200C（ZWNJ）、U+200D（ZWJ）などの幅ゼロのユニコードで、表示幅を奪わずにテキストに挿入できる。
  - 「結合文字（Combining Marks）」：U+0300〜U+036F 等、直前の文字に重ね表示される記号。複数を連続するとスタックして視覚的に“盛る”ことができる。
  - これらをセル状（グリッド）に配置したり、異なるベース文字に乗せることで、目に見える「絵」やパターンを作れる。
- 表示の仕組み
  - 多くのレンダラは「ベース文字＋結合文字列」を一つの描画ユニットとして合成する。結合を多用すると縦方向に伸びたり隣接セルに影響する場合がある（レンダラ差）。
  - ZWJ/ZWNJ はグリフの結合や分離（特に絵文字シーケンス）に影響するため、意図した結合／非結合を制御できる。
- 実例アイデア
  - 目に見えない注釈（可視部は変えずにメタ情報を埋める）
  - チャットでの「隠し絵」（短い文字列を並べて絵に見せる）
  - フォント／レンダラの差異検出テスト（同じ入力で崩れる環境を洗い出す）
- 限界とリスク
  - プラットフォーム依存：iOS、Android、Windows、各ブラウザで表示や間隔が違う。特にモバイルで崩れやすい。
  - 正規化（NFC/NFD）や入力フィルタで除去される可能性がある。
  - セキュリティ・可読性：隠し情報は悪用される恐れがあるため、取り扱いは注意（社内規約の確認を）。
  - 検索・編集性：見えない文字はコピー時や検索時の挙動を変える。

## 実践ポイント
- 作る手順（簡潔）
  1. ベース文字（目印にする英数字やドット）を決める。合成対象がないと結合文字は表示されないことがある。
  2. 結合文字（U+0300〜U+036F の中から視覚に訴えるもの）をセルごとに重ねる。多段にすると高さが出る。
  3. 必要に応じて ZWJ（U+200D）や ZWSP（U+200B）でセル間の結合や空白を調整。
  4. 対象プラットフォームで必ず動作確認（PC ブラウザ、iOS/Android アプリ、LINE 等）。
  5. 配布前に Unicode 正規化（NFC）を施して望ましい形が維持されるか確認する。
- 簡単な生成スニペット（Node.js）
```javascript
// JavaScript
// ベース文字を並べ、各セルに結合文字を付与して"縦に盛る"簡易例
const base = "................"; // グリッドの一行
const comb = "\u0316\u035C\u035E"; // 例：結合マークを3つ重ねる
const row = [...base].map(ch => ch === "." ? ch + comb : ch).join("");
console.log(row);
```
- テストポイント
  - コピー＆ペーストして別エディタで開いたときに崩れないか。
  - 検索・正規化後に意図した情報が消えないか。
  - 文字数カウントやバイト長（UTF-8）に注意：見た目と内部長が大きく乖離する。

