---
layout: post
title: "Show HN: Stop Claude Code from forgetting everything"
date: 2025-12-29T23:31:11.380Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://github.com/mutable-state-inc/ensue-skill"
source_title: "GitHub - mutable-state-inc/ensue-skill"
source_id: 46426624
excerpt: "会話をまたいで決定や調査を自動記録する永続メモリでClaudeをチームの記憶係にする方法"
---

# Claudeを“忘れない”AIに変える — 会話をまたいで知識を蓄える永続メモリの作り方

## 要約
会話ごとにゼロから始まるLLMの欠点を補い、対話の文脈・意思決定・調査ログを「知識ツリー」として永続化する仕組みの紹介。プラグイン連携で自動記録と手動の記憶操作ができ、開発ワークフローに溶け込ませられる。

## この記事を読むべき理由
日本の開発チームではドキュメント化やナレッジ継承が課題になりやすく、LLMとの反復的な設計議論や運用問合せで同じ前提を繰り返す無駄が生じる。本手法を使えば、AIが過去の意思決定や調査結果を参照しながら支援するため生産性と一貫性が向上する。

## 詳細解説
- 基本アイデア
  - LLMは会話単位で“状態がリセットされる”ため、同じ背景説明を繰り返す必要がある。このプロジェクトは「Ensue」のような永続知識ツリーを用意し、会話ごとにツリーを参照・更新して文脈を維持する。
  - 知識は単なるフラットなメモではなく、トピックや目的に応じた階層（例: research/, decisions/, architecture/）で整理され、後続の問い合わせで関連情報を自動的に参照する。

- 技術的構成（概観）
  - Claude Code（または対応チャット環境）のプラグインとして動作するスキル。プラグインフックやスクリプトを通して会話内容・ツール出力・セッションメタをキャプチャしてAPIに送信する。
  - 設定は環境変数で管理。必須のAPIキーを渡し、読み取り専用モードで自動ログ記録を無効にするオプションを提供（機密セッション向け）。
  - 手動操作も可能：ユーザが「remember …」で記憶を作り、「recall …」で関連ノードを検索して参照できる。これにより自動ログと手動キューイングの二重運用が可能。

- 実装時のポイント
  - プラグインは hooks/ scripts/ skills/ の構成を持ち、会話受信→必要な前処理→API送信、という流れを取る。保存された知識は会話開始時に参照コンテキストとして注入され、LLMの推論に影響を与える。
  - セキュリティとプライバシー：APIキー管理、ログの読み書きポリシー、保存データのスコープ制御（自動ログ無効化）を必須で設計すること。誤って機密情報を蓄積しないガバナンスが重要。

## 実践ポイント
- まずは小さなスコープで導入：プロジェクト単位の「architecture/」や「decisions/」だけを自動ログ対象にして挙動を観察する。
- 環境設定例（ローカルでテストする際）
```bash
# 環境変数を設定（実運用ではシークレット管理を使用）
export ENSUE_API_KEY="あなたのAPIキー"
# 機密会話の自動ログを止めたいとき
export ENSUE_READONLY=true
# プラグインのインストール（プロダクト側のプラグインコマンドを利用）
plugin marketplace add <PLUGIN_REPO_URL>
plugin install ensue-memory
# チャットアプリ（例: Claude Code）を再起動して反映
```
- 運用ルール
  - 「いつ自動記録するか」をチームで決める（議論、設計決定、運用トラブルシュート等）。
  - 定期的なメモリのレビューワークフローを作る（不要ノードの削除、情報の更新）。
  - センシティブな情報は自動ログ対象外にする、または読み取り専用で運用。

- 活用例
  - 長期プロジェクトでの設計決定のトレーサビリティ確保。
  - コードレビューで過去の設計理由を即座に参照して判断を早める。
  - ナレッジ共有が遅れがちなリモートチームのオンボーディング短縮。

総括すると、永続メモリの導入はLLMを単発のツールから「チームの記憶を持つ協業相手」へ昇華させる手段になる。まずは小さく試し、ガバナンスと運用ルールを整えつつスケールさせるのが現実的な進め方だ。
