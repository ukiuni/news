---
layout: post
title: "grep searched my node_modules for 6 minutes before i killed it - grepがnode_modulesを6分間検索して止めた"
date: 2026-01-27T15:30:36.751Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://www.codeant.ai/blogs/ripgrep-not-grep"
source_title: "grep searched my node_modules for 6 minutes before i killed it"
source_id: 416279153
excerpt: "大量のnode_modulesをgrepが丸ごと検索して数分止まる問題をrgで解消"
---

# grep searched my node_modules for 6 minutes before i killed it - grepがnode_modulesを6分間検索して止めた

node_modules地獄を一瞬で抜け出す：grepで固まる前に使いたい高速検索ツール

## 要約
元記事は404でしたが、タイトルから推察する問題点は明確です：大量ファイル（特にnode_modules）があるプロジェクトでgrepを使うと検索が遅くなる。代替としてripgrep (rg) 等の高速ツールを使うのが現実的な解決策です。

## この記事を読むべき理由
日本でもNode.jsプロジェクトやモノレポが増え、node_modulesや大量ファイルで開発者の「ちょっとした検索」が遅くなる場面が頻出します。無駄な待ち時間を減らし生産性を上げたいエンジニア／初心者向けの実践的な対処法を示します。

## 詳細解説
- 問題点：grepは単純で有能ですが、再帰的に大量ファイルを読むとI/OとCPUで詰まりやすく、.gitignoreを自動的に無視しない設定だとnode_modulesを丸ごと走査してしまいます。結果「何分も終わらない」ことが発生します。  
- 解決策：ripgrep (rg)、The Silver Searcher (ag) など、近年の検索ツールは並列処理や最適化された検索アルゴリズムを持ち、デフォルトで.gitignoreに従うため無駄なファイルをスキップします。VS Codeの検索が内部でripgrepを使っていることからも実務での信頼性は高いです。  
- 使い分けのポイント：普段はrgを標準ツールとして使い、どうしてもnode_modules内を調べたいときは明示的にそのディレクトリだけを指定します。プロジェクトルートに適切な .gitignore/.ignore を置いておくのも重要です。

## 実践ポイント
- ripgrepインストール（例）
```bash
# macOS (Homebrew)
brew install ripgrep

# Ubuntu
sudo apt install ripgrep
```

- 普段の検索（node_modules等を自動で無視）
```bash
rg '検索したい文字列'
```

- node_modulesを明示的に除外する（念のため）
```bash
rg '検索語' --glob '!node_modules/**'
```

- node_modules内だけを調べる（遅くなるが限定的に実行）
```bash
rg '検索語' node_modules
```

- 実務Tips
  - プロジェクトの .gitignore/.ignore を整備しておく（rgはこれを尊重する）。
  - エディタの検索が遅い場合、rgを外部コマンドで試して差を確認する（多くのエディタはrg連携可）。
  - CIやスクリプトで大量検索を回すときは対象を限定してI/O負荷を抑える。

（注）元記事の実体は404で取得できなかったため、タイトル内容から一般的な原因と実践的な対処法を整理しました。
