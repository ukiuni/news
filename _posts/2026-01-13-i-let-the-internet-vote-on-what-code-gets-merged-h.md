---
layout: post
title: "I let the internet vote on what code gets merged. Here's what happened in Week 1. - インターネットに「どのコードをマージするか」を投票させてみた──第1週で起きたこと"
date: 2026-01-13T17:33:28.370Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://blog.openchaos.dev/posts/week-1-the-first-merge"
source_title: "The First Merge | OpenChaos Blog"
source_id: 427718677
excerpt: "投票でPRを決めた実験がHacker Newsで話題に、APIの穴とスパムが暴いた“民主主義”の脆さ。"
image: "https://blog.openchaos.dev/og?title=The%20First%20Merge&amp;description=How%20a%20repo%20let%20the%20internet%20decide%20what%20gets%20shipped%E2%80%94and%20what%20happened%20next."
---

# I let the internet vote on what code gets merged. Here's what happened in Week 1. - インターネットに「どのコードをマージするか」を投票させてみた──第1週で起きたこと
Twitch Plays GitHub!? インターネットにコードの運命を託したら起きた“カオス”の一週間

## 要約
開発者が「誰でもPRを出して、リアクションで一番票を集めたPRを毎週マージする」仕組みを公開。1週間でHacker Newsのトップになり、投票ルールの改変、APIの落とし穴、ジョークから実装まで混ざったドラマが発生した。

## この記事を読むべき理由
GitHubを使ったコミュニティ駆動の実験は、OSS運営や社内ガバナンスの新しい示唆を与える。特に「投票で決める」仕組みを作るときに遭遇する技術的・運用上の課題（API限界、スパム、CIなど）は日本のプロジェクトでも直面しやすい。

## 詳細解説
- 仕組みの概要
  - Next.jsで作ったMVP：カウントダウン表示とオープンPR一覧。GitHubのリアクションAPIで投票数を表示し、最も票を集めたPRを日曜にマージするルール。ルール自体もPRで変更可能。
- 主要イベント（抜粋）
  - 初日：作者自身が「ダークモード」PRを出す（慣例的議論を誘うため）。
  - 「閉鎖投票」PR：全ファイル削除を狙う破壊系PRが出現。CIで弾かれ、民主主義にガードレールが働く。
  - 「賛否差（+1と-1）を計算する」PRが登場。単に賛成数だけでなく差分で勝敗を決める仕様変更は、投票戦略を一変させる武器にもなる。
  - APIの落とし穴：リアクションの表示が実際の数と合わず、原因はGitHubのリアクションAPIがデフォルトでページネーション（30件）を返す仕様だった。作者は民主主義が機能するために直接パッチを当てる判断をしたが、これは運営側の介入でもある。
  - デモンストレーションとしての「スパムPR」：ある参加者が大量PRを投げ、古いPRをAPIのページ外に押し出すことで不具合を可視化。悪意か実験かの境界が曖昧に。
  - マージ結果：最終的に「+1と-1を差し引いて集計する」PRが勝ち、初のコミュニティ駆動変更としてマージ（最終得票903）。
- 技術的ポイント
  - GitHubのREST APIはページネーションに注意（デフォルト30件）。リアクション全取得にはページを追う実装が必要。
  - 認証していないAPIはレート制限が厳しい（例：認証なしで60 req/時）。トークンやGitHub Appsを使った認証が必須。
  - CIは破壊的PRを止める最後の砦。ビルド・テストを通らないPRは自動で落とす設定が有効。
  - 外部ビルド（Vercelなど）やWASM＋Rustなどの実験的導入は、ビルドパスやモジュール解決で失敗しやすい（例：モジュールが見つからない）。
- コミュニティ面の学び
  - 人はカオスに「ルール」を作りたがる（下位票の導入やマージ頻度変更など）。
  - ミームが現実になる（Rust再実装が実際に進行）。
  - システムはすぐにゲームされる（投票操作、スパム、ラストミニットの差し替えなど）。
  - 運営者は完全中立でいられない。インフラ修正やスパム対処は不可避。

## 実践ポイント
- 小規模で試す：まずはローカルや限定コミュニティで投票ルールを試験運用する。
- APIは正しく扱う：
  - リアクションなどは必ずページネーション対応する（LinkヘッダやGraphQLで全件取得）。
  - 認証トークンやGitHub Appsを使ってレート制限を緩和する。
- 自動防御を整える：
  - CI（ビルド／テスト）を必須にして破壊的PRを事前にブロックする。
  - PRテンプレート／CODEOWNERS／protected branchesで無秩序なマージを抑える。
- 透明なルール設計：
  - 投票の「賛否」「期間」「合算方法」を明文化し、変更は明示的なプロセスにする。
- 監視とロギング：
  - 投票数取得失敗や異常な投票増加をアラート化して即対応できるようにする。
- 日本向けの応用例：
  - 企業内での機能優先度決定、OSSの実験的ガバナンス、ハッカソン的な参加型開発に有効。文化的に「合意形成」を重視する場ではルール設計を丁寧に。

この実験は「ルールを変えられること自体が機能だ」という点を示した。技術的な穴と人間の振る舞いが混ざり合う場面は、OSS運営や社内プロジェクトにも示唆が多い。
