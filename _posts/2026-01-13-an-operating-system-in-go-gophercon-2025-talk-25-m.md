---
layout: post
title: "An Operating System in Go - Goで作るオペレーティングシステム"
date: 2026-01-13T16:23:08.222Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://www.youtube.com/watch?v=SvsdVe1kgSU"
source_title: "GopherCon 2025: An Operating System in Go - Patricio Whittingslow - YouTube"
source_id: 427880285
excerpt: "Goで動くOSの実装ノウハウとGC／ランタイム対策を25分で具体解説"
image: "https://i.ytimg.com/vi/SvsdVe1kgSU/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGFcgZShlMA8=&amp;rs=AOn4CLDDS9hoSXXmlPQYfoMHqP5uuPOrog"
---

# An Operating System in Go - Goで作るオペレーティングシステム
ゴーで動くOSを作ってみたら何が変わる？――GopherCon 2025の「OSをGoで書く」実験レポート

## 要約
GopherCon 2025の25分トークでは、Patricio WhittingslowがGoでOSカーネル相当を実装する試みを紹介。言語の安全性や開発速度を活かしつつ、ランタイムやブート処理など低レイヤーの課題をどう解決したかを概説する内容。

## この記事を読むべき理由
日本でも組込み〜OS開発にGoを使いたいという関心が高まっている中、C/C++以外の選択肢としてGoを検討する際の現実的なメリットと落とし穴が短時間で掴める。実証例から学べば、プロトタイピングや教育用途、ツールチェーンの選定にすぐ役立つ。

## 詳細解説
トークは「Goの文法・ランタイム特性を保ちつつ、ブートからデバイス初期化、スケジューリングまで動かす」ことを中心に進む。主な技術ポイントは次の通り。

- ランタイムの扱い:
  - 標準のGoランタイムはOS上での動作を前提としているため、ブート直後の裸領域で動かすにはランタイムの一部を置き換える必要がある。具体的にはメモリ初期化、スタック管理、ゴルーチンの起動処理などをカスタム実装するアプローチが紹介される。
- ガベージコレクションとメモリ管理:
  - GCは設計次第でボトルネックと成り得る。リアルタイム性が必要ならGCを止めるか、簡易なアロケータ／参照管理に置き換える選択がある。トークではGC負荷を低く抑える工夫（固定バッファ、スラブアロケータなど）が説明される。
- ブート・BIOS/UEFI・実行環境:
  - UEFIやMultibootを経由してバイナリを読み込み、ページテーブルやMMUを初期化する流れ。最低限のアセンブリやリンカスクリプトを用意し、Goバイナリを直接起動するための工夫が必要になる。
- 割り込み・例外・コンテキスト切替:
  - ハードウェア割り込みのハンドラや例外テーブルを用意し、Go側のスケジューラへ制御を渡す仕組み。CPUコンテキスト（レジスタ保存）を適切に扱うためには一部アセンブリが不可欠。
- ユーザーランドとシステムコール:
  - ユーザープロセス的な概念を作るなら、ソフトウェア割り込み／トラップによるシステムコールインターフェースが必要。Goの標準ライブラリは使えないため、最小限のIO・ファイル抽象を自前で実装する。
- 開発／デバッグ環境:
  - QEMUなどエミュレータで繰り返しテストし、GDBやシリアルログでデバッグするワークフローが推奨される。クロスコンパイルやカスタムリンク設定の自動化も重要。

要点として、Goは高水準の表現力と安全性でOS開発のプロトタイピングを加速できる一方、言語実装（ランタイム・GC・スタック）に深く触れる必要があり、Cでやる場合と異なる設計上の工夫が要求される、というバランスが示される。

## 日本市場との関連
- 組込みやIoT分野でのGo採用は増えているが、リアルタイム性やリソース制約がある場面では慎重な設計が必要。トークの実例は、日本のメーカーが試作レイヤーや制御用ミドルウェアを短期間で作る際の指針になる。
- 教育用途：OS原理や低レイヤー実装の学習にGoを使えば、学生やエンジニアが言語の生産性を享受しつつ概念を掴みやすい。
- ツールチェーンの国内導入：QEMUやクロスコンパイル環境をCIに組み込むことで、ハード不要で継続的に検証できる点は日本の開発現場でも即戦力。

## 実践ポイント
- 小さく始める：まずは「ブートしてシリアルにHelloを出す」レベルから。QEMU＋シリアル出力で反復開発。
- ランタイムの境界を決める：どこまで標準Goランタイムを使い、どこを自前実装するか設計してから実装。
- メモリ管理を単純化：初期段階はGC依存を避け、固定プールや明示的解放で安全に進める。
- ツール選定：クロスコンパイラ、リンカスクリプト、QEMU、GDBを早めにセットアップして自動化する。
- 既存技術を活用：TinyGoや既存のOS-in-Goプロジェクトを参考にし、再利用可能なコンポーネントを取り込む。
- ドキュメント化とテスト：ハード寄りの実装は再現性が命。テストシナリオとCIで回す仕組みを作る。

GopherConの短いトークながら、Goで「動く」OSを作るための現実的な問題と回避策がまとまっている。興味があれば動画（An Operating System in Go - GopherCon 2025, 25分）を視聴し、上の実践ポイントを試してみると良い。
