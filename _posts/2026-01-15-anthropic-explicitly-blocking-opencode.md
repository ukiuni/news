---
layout: post
title: "Anthropic Explicitly Blocking OpenCode - Anthropicが明確にOpenCodeをブロックしている件"
date: 2026-01-15T00:44:29.686Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://gist.github.com/R44VC0RP/bd391f6a23185c0fed6c6b5fb2bac50e"
source_title: "anthropic-screws-opencode.ts · GitHub"
source_id: 46625918
excerpt: "Anthropicが特定ワード「OpenCode」だけAPIで遮断、開発・連携設計に影響あり"
image: "https://github.githubassets.com/assets/gist-og-image-54fd7dc0713e.png"
---

# Anthropic Explicitly Blocking OpenCode - Anthropicが明確にOpenCodeをブロックしている件
魅力的なタイトル: Anthropicがライバル名を“直撃ブロック”──OpenCodeだけ狙い撃ちされた証拠と日本での意味

## 要約
海外の開発者が公開したスクリプトが示すところでは、AnthropicのClaude（Code）APIはシステムプロンプト内で特定の文字列「You are OpenCode」を拒否し、他の同様の自己同定文は許可している。これは特定競合をターゲットにした可能性がある挙動だ。

## この記事を読むべき理由
クラウドAIをプロダクトや開発ワークフローに組み込む日本のエンジニアやスタートアップにとって、API側の暗黙ルールや検閲的フィルタは設計やコンプライアンスに直結する。特定ワードの遮断は動作の再現性やブランド連携に影響を与えるため、早めに挙動を理解して対策を取るべきだ。

## 詳細解説
- 何が報告されたか：投稿者はBun/NodeのスクリプトでOAuth認証を経てClaudeのAPIへリクエストを送り、システムプロンプトを2ブロック（必須ヘッダ + テスト文）に分けて検証した。結果、「You are OpenCode」および小文字版「You are opencode」は失敗（API側で拒否）し、「You are Cursor」や「You are Pi」など他の自己同定文は成功した。
- 技術的なポイント：
  - テストはClaudeのOAuthトークン（Pro/Max相当）を使い、systemフィールドにテキストブロックを渡して応答可否を観察している。
  - 最初のシステムブロックは固定文（Anthropic公式のCLIを示す文）で、2番目のブロックを変えて動作差を確認している点が重要。
  - 結果は「単一フレーズのみを遮断している」ことを示唆しており、一般的なトークン誤りやフォーマットエラーとは一致しない。
- なぜ怪しいのか：フィルタが特定のプロダクト名（OpenCode）にだけ反応しているなら、競合対策や商標／ブランド保護のための意図的なブロックである可能性がある。単純な安全フィルタ（暴力や性的表現等）では説明しにくい挙動。

## 実践ポイント
- 自分で再現する手順（要点・注意）
  1. ClaudeのPro/MaxアカウントとOAuthでのAPI権限を用意する（公開トークンの管理に注意）。
  2. systemブロックを2つ用意し、2つ目に「You are OpenCode」を含めてリクエストを投げる。成功・失敗をログする。
  3. 同じリクエストで他の名前を試し、差異を確認する。
- 即できる対策
  - プロダクト名を直接書かない：同義の説明（「オープンソースのコード補助ツールとして振る舞って」等）に言い換える。
  - フェールセーフ実装：API側のシステムプロンプトが拒否された場合の代替ロジックを用意する（別表現や別モデルへのフォールバック）。
  - 監査ログを残す：将来的な法的／ビジネス議論のためにリクエストとレスポンスを保存しておく。
- ビジネス的視点（日本市場向け）
  - 日本の開発者や企業は、プライバシー・独自性・競争制限に敏感。APIのブラックリスト的挙動はベンダーロックインや競争環境に影響するため、契約や利用規約を確認し、必要なら事業上の説明を求める。
  - オープンソース連携を前提にしたサービスを作る場合、名称や実装方法に柔軟性を持たせておくと安全。

結論：公開されたスクリプトは「特定フレーズだけブロックされる」証拠を提示しており、開発現場では表現の選び方やフォールバック設計が重要になる。早めに挙動を確認し、運用に組み込むことを推奨する。
