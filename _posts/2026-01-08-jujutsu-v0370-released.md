---
layout: post
title: "jujutsu v0.37.0 released - jujutsu v0.37.0 リリース"
date: 2026-01-08T22:56:49.132Z
categories: [tech, world-news]
tags: [tech-news, japan]
source_url: "https://github.com/jj-vcs/jj/releases/tag/v0.37.0"
source_title: "Release v0.37.0 · jj-vcs/jj · GitHub"
source_id: 1268745772
excerpt: "jj v0.37.0で隠れた履歴を番号指定でき迅速にロールバック可能、破壊的変更も要注意"
image: "https://opengraph.githubassets.com/5681870e5e6fe23579c921aaf651f8ffcf10fcf90abba48611d09c6817932601/jj-vcs/jj/releases/tag/v0.37.0"
---

# jujutsu v0.37.0 released - jujutsu v0.37.0 リリース
ミスを即ロールバック／隠れたコミットも一意参照！jj v0.37.0で「履歴操作」がさらに扱いやすくなりました

## 要約
jj v0.37.0では、隠れた・分岐した変更を番号付きで確実に参照できる新構文や、実行ビットの扱いを制御する仕組み、検索やGC改善など開発ワークフローを楽にする改良が多数入っています。一方で文字列パターンの扱いやいくつかの古い設定の削除といった破壊的変更もあります。

## この記事を読むべき理由
- 日本の開発現場でも増える長い履歴や分岐（コードレビューや大量ブランチ運用）で、誤って上書きした内容を安全に戻せることは重要です。  
- Windows上でのシンボリックリンク挙動や、実行権限の誤差に悩むチームにも直接効く改善が含まれています。  
- 破壊的変更の対応を怠ると CI や運用スクリプトが壊れる可能性があるため、アップデート前に要点を押さえておきましょう。

## 詳細解説
- 隠れた・分岐コミット参照の新構文: 変更IDに対して数値サフィックスを付けられるようになりました。たとえば `xyz/0` は最新の `xyz`、`xyz/1` はその一つ前を指します。これにより、同じ変更IDが複数ある場合でも確実に指定可能です。例:
  ```bash
  # 直前のバージョンに戻す
  jj restore --from xyz/1 --to xyz
  ```
  ログ上でも必要時に数値が表示され、識別が容易になります。

- 破壊的変更（要確認）:
  - revset やコマンド引数、設定内の文字列パターンはデフォルトで glob として解釈されます。部分一致や完全一致が必要な場合は `substring:` や `exact:` プレフィックスを使ってください。
  - 旧来の `<bookmark>@<remote>` 構文は非推奨。代わりに `--remote=<remote>` を使うように変更されています。例:
    ```bash
    jj bookmark track feature --remote=origin
    ```
  - 古い設定項目（例: `git.push-bookmark-prefix` など）やテンプレートメソッドが削除されています。アップデート前に設定ファイルを精査してください。
  - Windowsで「/」を含むパスを指すシンボリックリンクはサポートされません（Windowsの制約）。

- 実行ビット（executable bit）の扱い:
  - ローカル作業コピーで実行ビットの変更を無視するオプションが導入されました。デフォルトではファイルシステムの挙動を検出しますが、明示的に設定することも可能です（設定例を下に示します）。

- その他の新機能・改善:
  - `jj util gc` が未到達ファイルを削除してディスク節約。
  - ファイル内検索（git grep 相当）の早期実装。
  - 色付けや差分表示の微改善、タグ一覧のソート、TreeDiff関連の API 強化など開発体験向上の変更。
  - 多数のバグ修正（Windowsの壊れたシンボリックリンク、巨大 Git packfile の読み込み、gerrit upload のケース等）。

## 実践ポイント
- まずはリポジトリをバックアップしてからアップデートを行う。特に CI/スクリプトで revset やブックマーク指定を使っている場合は、glob 解釈の変更で動作が変わる可能性があります。
- 新しい履歴参照を活用して「誤った上書き」を簡単に戻す:
  ```bash
  jj restore --from xyz/1 --to xyz
  ```
- 実行ビットの差分を無視したい場合は設定で制御（.jj 設定ファイルに追加）:
  ```ini
  [working-copy]
  exec-bit-change = "ignore"
  ```
  （デフォルトは自動検出。チームでポリシーを決めておくと良い）

- リモートブックマーク操作は `--remote=` を使う:
  ```bash
  jj bookmark track featureA --remote=origin
  jj bookmark untrack featureA --remote=origin
  ```
- ディスク節約とクリーンアップのために `jj util gc` を定期実行。
- アップデートで古い設定やテンプレートが削除されているため、`jj config` やリポジトリ内の設定を見直す。特に `git.push-bookmark-prefix` 等の削除済みオプションに注意。

短くまとめると、v0.37.0は「履歴をより確実に扱える」改良が中心で、日常のミスからの回復やクロスプラットフォーム運用の安定化に寄与します。アップデート前に破壊的変更をチェックして、安全に移行してください。
